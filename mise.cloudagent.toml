# SPDX-FileCopyrightText: 2025 Knitli Inc.
# SPDX-FileContributor: Adam Poulemanos <adam@knit.li>
#
# SPDX-License-Identifier: MIT OR Apache-2.0

# ============================================================================
# Cloud Agent-Specific Mise Configuration
# ============================================================================
# This lightweight configuration is designed for AI Agents working in CI/CD
# environments, focusing on essential tools and minimal setup.
# Usage in GitHub Actions:
#   - name: Setup mise
#     env:
#       MISE_ENV: cloudagent
#     run: mise install
#
# NOTE: This configuration inherits from `mise.toml`, so these are additions/overrides
# ============================================================================
#
[settings]
status.show_env = false  # Reduce CI output noise

# ============================================================================
# Cloud Agent-Essential Tools Only
# ============================================================================
# These are the minimal tools required to run Cloud Agent tasks:
# - format
# ============================================================================

[tools]
# Core language runtimes
python = "3.13"
uv = "latest"
# Quality & validation tools
"pipx:reuse" = "latest"  # License validation
"pipx:ty" = "latest"  # Type checking
hk = "latest"  # Task runner (used by check/format tasks)
ruff = "latest"  # Python linting/formatting
# CI/CD tools
gh = "latest"  # GitHub CLI (for workflows)

# ============================================================================
# Environment Variables
# ============================================================================
[env]
# Simplified PATH for CI (no dev scripts needed)
_.path = [".venv/bin"]
MISE_ENV = "cloudagent"

# ============================================================================
# Task Definitions
# ============================================================================
#
[tasks]
[tasks.sync]
description = "Setup python environment and install dependencies"
shell = "bash -c"
run = '''
uv sync --group dev --group test
'''
