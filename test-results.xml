<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="10" skipped="37" tests="799" time="836.936" timestamp="2025-11-25T07:27:57.375722-05:00" hostname="devbox"><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_typical_python_file_performance" time="9.710" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_typical_javascript_file_performance" time="9.275" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_large_python_file_performance" time="39.888" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_very_large_python_file_performance" time="38.121" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_memory_usage_typical_file" time="3.603" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_memory_usage_large_file" time="14.090" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_bulk_file_throughput" time="2.482" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerPerformance" name="test_semantic_vs_delimiter_performance" time="10.410" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerScalability" name="test_chunking_consistency_across_sizes" time="5.791" /><testcase classname="tests.benchmark.chunker.test_performance.TestChunkerScalability" name="test_concurrent_chunking_safety" time="2.436" /><testcase classname="tests.contract.test_build_output" name="test_validate_build_output" time="2.886" /><testcase classname="tests.contract.test_build_output" name="test_build_command_success" time="0.017" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeSignature" name="test_find_code_is_async" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeSignature" name="test_find_code_parameters" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeSignature" name="test_find_code_parameter_defaults" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeSignature" name="test_find_code_return_type" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeResponseSchema" name="test_response_model_is_pydantic" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeResponseSchema" name="test_response_required_fields" time="0.028" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeResponseSchema" name="test_response_field_types" time="0.023" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeResponseSchema" name="test_response_validates_constraints" time="0.003" /><testcase classname="tests.contract.test_find_code_contract.TestFindCodeResponseSchema" name="test_response_model_creates_valid_instance" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestCodeMatchSchema" name="test_code_match_required_fields" time="0.019" /><testcase classname="tests.contract.test_find_code_contract.TestCodeMatchSchema" name="test_code_match_relevance_score_range" time="0.017" /><testcase classname="tests.contract.test_find_code_contract.TestCodeMatchSchema" name="test_code_match_match_type_enum" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestCodeMatchSchema" name="test_code_match_span_validation" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestSearchStrategyEnum" name="test_search_strategy_values" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestIntentTypeEnum" name="test_intent_type_values" time="0.001" /><testcase classname="tests.contract.test_find_code_contract.TestParameterValidation" name="test_token_limit_constraints" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestParameterValidation" name="test_max_results_constraints" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestParameterValidation" name="test_query_min_length" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestContractExamples" name="test_example_simple_search_response_structure" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestTypesSafety" name="test_response_is_not_dict" time="0.002" /><testcase classname="tests.contract.test_find_code_contract.TestTypesSafety" name="test_pydantic_model_validation" time="0.001" /><testcase classname="tests.contract.test_find_code_contract.TestTypesSafety" name="test_response_schema_serialization" time="0.002" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_implements_vector_store_provider" time="0.004" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_list_collections" time="0.192" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_search" time="0.215" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_upsert" time="0.222" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_delete_by_file" time="0.161" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_delete_by_id" time="0.169" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_delete_by_name" time="0.207" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_persist_to_disk" time="0.186" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_restore_from_disk" time="0.277" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_persistence_file_format" time="0.877" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_auto_persist_on_upsert" time="0.153" /><testcase classname="tests.contract.test_memory_provider.TestMemoryProviderContract" name="test_collection_property" time="0.108" /><testcase classname="tests.contract.test_metadata_validation" name="test_validate_twine_check" time="2.781" /><testcase classname="tests.contract.test_metadata_validation" name="test_metadata_completeness" time="0.010" /><testcase classname="tests.contract.test_publish_validation" name="test_validate_publish_output_testpypi" time="0.001"><skipped type="pytest.skip" message="Requires actual TestPyPI/PyPI publish - run manually after publish">/home/knitli/codeweaver/tests/contract/test_publish_validation.py:56: Requires actual TestPyPI/PyPI publish - run manually after publish</skipped></testcase><testcase classname="tests.contract.test_publish_validation" name="test_validate_publish_output_pypi" time="0.000"><skipped type="pytest.skip" message="Requires actual PyPI publish - run manually after production publish">/home/knitli/codeweaver/tests/contract/test_publish_validation.py:122: Requires actual PyPI publish - run manually after production publish</skipped></testcase><testcase classname="tests.contract.test_publish_validation" name="test_local_installation" time="53.093" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_implements_vector_store_provider" time="0.003" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_list_collections" time="0.698" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_search_with_dense_vector" time="0.618" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_search_with_sparse_vector" time="0.532" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_search_with_hybrid_vectors" time="0.512" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_upsert_batch_of_chunks" time="1.674" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_delete_by_file" time="0.480" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_delete_by_file_idempotent" time="0.310" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_delete_by_id" time="0.455" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_delete_by_name" time="0.405" /><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_collection_property" time="0.334"><failure message="AssertionError: assert 2 &gt;= 3&#10; +  where 2 = len(['contract', '42601fb4'])">self = &lt;tests.contract.test_qdrant_provider.TestQdrantProviderContract object at 0x752d1e1caf30&gt;
qdrant_provider = QdrantVectorStoreProvider(config={'url': 'http://localhost:6333', 'collection_name': 'contract-42601fb4'}, _client=Non...okenizer_model=None, preferred_metrics=('cosine', 'dot', 'euclidean'), hf_name=None, other={}), 'backup_sparse': None})

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.qdrant#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_collection_property#x1B[39;49;00m(#x1B[96mself#x1B[39;49;00m, qdrant_provider):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Test collection property returns configured collection name."""#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Collection name is generated from project_name + blake_hash(project_path)#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# For tests, this resolves to: codeweaver-test-{8_char_hash}#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94massert#x1B[39;49;00m qdrant_provider.collection #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94massert#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33m-#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[95min#x1B[39;49;00m qdrant_provider.collection#x1B[90m#x1B[39;49;00m
        parts = qdrant_provider.collection.split(#x1B[33m"#x1B[39;49;00m#x1B[33m-#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
        #x1B[90m# Should have at least 3 parts: project, name, hash (e.g., codeweaver-test-751748d4)#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       #x1B[94massert#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(parts) &gt;= #x1B[94m3#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       AssertionError: assert 2 &gt;= 3#x1B[0m
#x1B[1m#x1B[31mE        +  where 2 = len(['contract', '42601fb4'])#x1B[0m

#x1B[1m#x1B[31mtests/contract/test_qdrant_provider.py#x1B[0m:346: AssertionError</failure></testcase><testcase classname="tests.contract.test_qdrant_provider.TestQdrantProviderContract" name="test_base_url_property" time="0.327" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_abstract_methods_defined" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_list_collections_signature" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_search_signature" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_upsert_signature" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_delete_by_file_signature" time="0.003" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_delete_by_id_signature" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_delete_by_name_signature" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_properties_defined" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_cannot_instantiate_abstract_class" time="0.002" /><testcase classname="tests.contract.test_vector_store_provider.TestVectorStoreProviderContract" name="test_generic_type_parameter" time="0.002" /><testcase classname="tests.contract.test_version_derivation" name="test_validate_version_derivation" time="2.305" /><testcase classname="tests.contract.test_version_derivation" name="test_version_consistency" time="2.191" /><testcase classname="tests.e2e.test_user_journeys.TestNewUserQuickStart" name="test_new_user_quick_start_journey" time="0.133" /><testcase classname="tests.e2e.test_user_journeys.TestNewUserQuickStart" name="test_quick_start_with_config_show" time="0.143" /><testcase classname="tests.e2e.test_user_journeys.TestNewUserQuickStart" name="test_quick_start_list_capabilities" time="0.230" /><testcase classname="tests.e2e.test_user_journeys.TestOfflineDeveloperWorkflow" name="test_offline_developer_workflow" time="0.106" /><testcase classname="tests.e2e.test_user_journeys.TestOfflineDeveloperWorkflow" name="test_offline_list_local_providers" time="0.137" /><testcase classname="tests.e2e.test_user_journeys.TestOfflineDeveloperWorkflow" name="test_offline_config_modifications" time="0.132" /><testcase classname="tests.e2e.test_user_journeys.TestProductionDeploymentWorkflow" name="test_production_deployment_workflow" time="0.006" /><testcase classname="tests.e2e.test_user_journeys.TestProductionDeploymentWorkflow" name="test_production_env_var_override" time="0.061" /><testcase classname="tests.e2e.test_user_journeys.TestProductionDeploymentWorkflow" name="test_production_multiple_environments" time="0.006" /><testcase classname="tests.e2e.test_user_journeys.TestCompleteUserJourneys" name="test_first_time_user_complete_journey" time="0.158" /><testcase classname="tests.e2e.test_user_journeys.TestCompleteUserJourneys" name="test_power_user_custom_setup" time="0.087" /><testcase classname="tests.e2e.test_user_journeys.TestCompleteUserJourneys" name="test_team_collaboration_workflow" time="0.069" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_real_python_file" time="0.074" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_degradation_chain" time="0.005" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_multiple_files_parallel_process" time="3.841" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_multiple_files_parallel_thread" time="4.932" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_parallel_error_handling" time="0.136" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_parallel_empty_file_list" time="0.002" /><testcase classname="tests.integration.chunker.test_e2e" name="test_e2e_parallel_dict_convenience" time="2.329" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitFullWorkflow" name="test_full_init_creates_both_configs" time="0.117" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitFullWorkflow" name="test_http_streaming_architecture" time="0.108" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitModes" name="test_config_only_flag" time="0.113" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitModes" name="test_mcp_only_flag" time="0.033" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitIntegration" name="test_init_then_config_show" time="0.139" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitIntegration" name="test_init_then_doctor" time="0.145" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitIntegration" name="test_init_respects_existing_config" time="0.107" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitMultipleClients" name="test_init_claude_code" time="0.030" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitMultipleClients" name="test_init_claude_desktop" time="0.065" /><testcase classname="tests.integration.cli.test_init_workflows.TestInitMultipleClients" name="test_init_multiple_clients_sequentially" time="0.091" /><testcase classname="tests.integration.providers.test_embedding_failover" name="test_registry_cross_provider_collision" time="15.333"><failure message="ValueError: Embeddings are already set for dense in chunk 06925a0c-d497-70fe-8000-07d72ec7a19a.">sample_chunk = CodeChunk(content='def test_function():\n    return 42', line_range=Span(1, 2, 06925a1a-92b4-7117-8000-c061a2306a76), ...'Filename: test.py | Language: Python | Category: Text block', length=226, token_estimate=56, line_start=1, line_end=2)
primary_embedding_provider = SentenceTransformersEmbeddingProvider(client=SentenceTransformer(
  (0): Transformer({'max_seq_length': 8192, 'do_lowe...te_code': True, 'normalize_embeddings': True, 'model_name_or_path': 'ibm-granite/granite-embedding-small-english-r2'}})
backup_embedding_provider = SentenceTransformersEmbeddingProvider(client=SentenceTransformer(
  (0): Transformer({'max_seq_length': 8192, 'do_lowe...te_code': True, 'normalize_embeddings': True, 'model_name_or_path': 'ibm-granite/granite-embedding-small-english-r2'}})

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_registry_cross_provider_collision#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        sample_chunk, primary_embedding_provider, backup_embedding_provider#x1B[90m#x1B[39;49;00m
    ):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Test Bug #1: EmbeddingRegistry cross-provider collision.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Scenario:#x1B[39;49;00m
    #x1B[33m    1. Primary embeds chunk, stores in global registry#x1B[39;49;00m
    #x1B[33m    2. Backup tries to upsert same chunk#x1B[39;49;00m
    #x1B[33m    3. Chunk.dense_embeddings fetches PRIMARY embeddings from registry#x1B[39;49;00m
    #x1B[33m    4. Dimension mismatch causes failure#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Expected Behavior: Should fail or use wrong embeddings#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Step 1: Primary embeds the chunk#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       primary_embeddings = #x1B[94mawait#x1B[39;49;00m primary_embedding_provider.embed_documents([sample_chunk])#x1B[90m#x1B[39;49;00m
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/providers/test_embedding_failover.py#x1B[0m:121: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31msrc/codeweaver/providers/embedding/providers/base.py#x1B[0m:594: in embed_documents
    #x1B[0m#x1B[96mself#x1B[39;49;00m._register_chunks(#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31msrc/codeweaver/providers/embedding/providers/base.py#x1B[0m:956: in _register_chunks
    #x1B[0mregistry[info.chunk_id] = registered.add(info)#x1B[90m#x1B[39;49;00m
                              ^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = ChunkEmbeddings(sparse=EmbeddingBatchInfo(batch_id=UUID('06925a19-8387-7c68-8000-e2510239b01c'), batch_index=0, kind=&lt;...Category: Text block', length=201, token_estimate=50, line_start=1, line_end=2), backup_dense=None, backup_sparse=None)
embedding_info = EmbeddingBatchInfo(batch_id=UUID('06925a1b-59bd-7409-8000-ae56410b4556'), batch_index=0, kind=&lt;EmbeddingKind.DENSE: 'd...83, -0.0011669787345454097, 0.0050660306587815285, -0.06578385084867477), dimension=384, dtype='float16', backup=False)

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92madd#x1B[39;49;00m(#x1B[96mself#x1B[39;49;00m, embedding_info: EmbeddingBatchInfo) -&gt; ChunkEmbeddings:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Add an EmbeddingBatchInfo to the ChunkEmbeddings.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        embedding_info (EmbeddingBatchInfo): The embedding information to add.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        ChunkEmbeddings: A new ChunkEmbeddings instance with the added embedding.#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m (#x1B[90m#x1B[39;49;00m
            (#x1B[90m#x1B[39;49;00m
                embedding_info.kind == EmbeddingKind.DENSE#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m embedding_info.backup#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[96mself#x1B[39;49;00m.backup_dense #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
            #x1B[95mor#x1B[39;49;00m (#x1B[90m#x1B[39;49;00m
                embedding_info.kind == EmbeddingKind.DENSE#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m embedding_info.backup#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[96mself#x1B[39;49;00m.dense #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
            #x1B[95mor#x1B[39;49;00m (#x1B[90m#x1B[39;49;00m
                embedding_info.kind == EmbeddingKind.SPARSE#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m embedding_info.backup#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[96mself#x1B[39;49;00m.backup_sparse #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
            #x1B[95mor#x1B[39;49;00m (#x1B[90m#x1B[39;49;00m
                embedding_info.kind == EmbeddingKind.SPARSE#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m embedding_info.backup#x1B[90m#x1B[39;49;00m
                #x1B[95mand#x1B[39;49;00m #x1B[96mself#x1B[39;49;00m.sparse #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
        ):#x1B[90m#x1B[39;49;00m
&gt;           #x1B[94mraise#x1B[39;49;00m #x1B[96mValueError#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
                #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mEmbeddings are already set for #x1B[39;49;00m#x1B[33m{#x1B[39;49;00membedding_info.kind.value#x1B[33m}#x1B[39;49;00m#x1B[33m in chunk #x1B[39;49;00m#x1B[33m{#x1B[39;49;00membedding_info.chunk_id#x1B[33m}#x1B[39;49;00m#x1B[33m.#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE           ValueError: Embeddings are already set for dense in chunk 06925a0c-d497-70fe-8000-07d72ec7a19a.#x1B[0m

#x1B[1m#x1B[31msrc/codeweaver/providers/embedding/types.py#x1B[0m:226: ValueError</failure></testcase><testcase classname="tests.integration.providers.test_embedding_failover" name="test_deduplication_prevents_reembedding" time="4.654"><failure message="AssertionError: First embedding should succeed&#10;assert 0 &gt; 0&#10; +  where 0 = len([])">sample_chunk = CodeChunk(content='def test_function():\n    return 42', line_range=Span(1, 2, 06925a1b-70d4-7fe9-8000-7289f756726a), ...'Filename: test.py | Language: Python | Category: Text block', length=226, token_estimate=56, line_start=1, line_end=2)
primary_embedding_provider = SentenceTransformersEmbeddingProvider(client=SentenceTransformer(
  (0): Transformer({'max_seq_length': 8192, 'do_lowe...te_code': True, 'normalize_embeddings': True, 'model_name_or_path': 'ibm-granite/granite-embedding-small-english-r2'}})

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_deduplication_prevents_reembedding#x1B[39;49;00m(sample_chunk, primary_embedding_provider):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Test Bug #3: Deduplication prevents sync-back re-embedding.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Scenario:#x1B[39;49;00m
    #x1B[33m    1. Chunk is embedded with primary provider#x1B[39;49;00m
    #x1B[33m    2. Content hash is stored in _hash_store#x1B[39;49;00m
    #x1B[33m    3. Try to re-embed same chunk (simulating sync-back)#x1B[39;49;00m
    #x1B[33m    4. Chunk is filtered out due to deduplication#x1B[39;49;00m
    #x1B[33m    5. Returns empty list, sync-back fails#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Expected Behavior: Second embed returns empty list#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Step 1: First embedding#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        embeddings_first = #x1B[94mawait#x1B[39;49;00m primary_embedding_provider.embed_documents([sample_chunk])#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
&gt;       #x1B[94massert#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(embeddings_first) &gt; #x1B[94m0#x1B[39;49;00m, #x1B[33m"#x1B[39;49;00m#x1B[33mFirst embedding should succeed#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       AssertionError: First embedding should succeed#x1B[0m
#x1B[1m#x1B[31mE       assert 0 &gt; 0#x1B[0m
#x1B[1m#x1B[31mE        +  where 0 = len([])#x1B[0m

#x1B[1m#x1B[31mtests/integration/providers/test_embedding_failover.py#x1B[0m:177: AssertionError</failure></testcase><testcase classname="tests.integration.providers.test_embedding_failover" name="test_hash_store_is_class_variable" time="6.669" /><testcase classname="tests.integration.providers.test_embedding_failover" name="test_chunk_property_fetches_from_global_registry" time="3.181" /><testcase classname="tests.integration.providers.test_embedding_failover" name="test_full_failover_scenario" time="0.007"><skipped type="pytest.skip" message="Integration test - run manually to validate full scenario">/home/knitli/codeweaver/tests/integration/providers/test_embedding_failover.py:283: Integration test - run manually to validate full scenario</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_full_pipeline_index_then_search" time="0.001"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:85: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_incremental_indexing_updates_search_results" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:132: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_pipeline_handles_large_codebase" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:218: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_pipeline_handles_file_updates" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:310: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_pipeline_coordination_with_errors" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:401: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_search_performance_with_real_providers" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:477: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_full_pipeline" name="test_indexing_performance_with_real_providers" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_full_pipeline.py:529: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_finds_authentication_code" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:87: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_finds_database_code" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:128: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_finds_api_endpoints" time="0.001"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:159: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_distinguishes_different_concepts" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:190: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_returns_relevant_code_chunks" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:233: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_respects_file_types" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:273: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_handles_no_matches_gracefully" time="0.001"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:307: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_handles_empty_codebase" time="0.000"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:342: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.real.test_search_behavior" name="test_search_with_very_long_query" time="0.001"><skipped type="pytest.skip" message="Real integration tests require model downloads - run manually with network access">/home/knitli/codeweaver/tests/integration/real/test_search_behavior.py:390: Real integration tests require model downloads - run manually with network access</skipped></testcase><testcase classname="tests.integration.test_build_flow" name="test_build_and_validate_flow" time="2.942" /><testcase classname="tests.integration.test_build_flow" name="test_incremental_build" time="4.292" /><testcase classname="tests.integration.test_build_flow" name="test_build_with_clean_flag" time="4.297" /><testcase classname="tests.integration.test_client_factory_integration.TestProviderInstantiationWithClientFactory" name="test_create_provider_with_client_from_map" time="0.018" /><testcase classname="tests.integration.test_client_factory_integration.TestProviderInstantiationWithClientFactory" name="test_create_provider_skips_client_if_provided" time="0.002" /><testcase classname="tests.integration.test_client_factory_integration.TestProviderInstantiationWithClientFactory" name="test_create_provider_handles_client_creation_failure" time="0.006" /><testcase classname="tests.integration.test_client_factory_integration.TestVectorStoreProviderWithClientFactory" name="test_qdrant_provider_with_memory_mode" time="0.005" /><testcase classname="tests.integration.test_client_factory_integration.TestVectorStoreProviderWithClientFactory" name="test_qdrant_provider_with_url_mode" time="0.004" /><testcase classname="tests.integration.test_client_factory_integration.TestProviderKindStringHandling" name="test_string_provider_kind_in_create_provider" time="0.007" /><testcase classname="tests.integration.test_client_factory_integration.TestGlobalRegistryIntegration" name="test_get_provider_registry_has_client_factory" time="0.002" /><testcase classname="tests.integration.test_custom_config" name="test_custom_configuration" time="1.019" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_dockerfile_exists" time="0.002" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_dockerfile_has_proper_license_header" time="0.002" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_dockerfile_syntax" time="1.823" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_docker_build_succeeds" time="188.181" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_docker_image_has_entrypoint" time="1.873" /><testcase classname="tests.integration.test_docker.TestDockerfile" name="test_docker_image_version" time="2.989" /><testcase classname="tests.integration.test_docker.TestDockerCompose" name="test_docker_compose_file_exists" time="0.004" /><testcase classname="tests.integration.test_docker.TestDockerCompose" name="test_docker_compose_syntax" time="0.574" /><testcase classname="tests.integration.test_docker.TestDockerCompose" name="test_docker_compose_defines_required_services" time="0.208" /><testcase classname="tests.integration.test_docker.TestDockerCompose" name="test_docker_compose_services_start" time="56.271"><failure message="subprocess.CalledProcessError: Command '['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_docker_compose_services_s0/.env', 'up', '-d']' returned non-zero exit status 1.">self = &lt;tests.integration.test_docker.TestDockerCompose object at 0x752b8a989f30&gt;
repo_root = PosixPath('/home/knitli/codeweaver')
tmp_path = PosixPath('/tmp/pytest-of-knitli/pytest-67/test_docker_compose_services_s0')

    #x1B[0m    #x1B[37m@pytest#x1B[39;49;00m.mark.slow#x1B[90m#x1B[39;49;00m
        #x1B[37m@pytest#x1B[39;49;00m.mark.network#x1B[90m#x1B[39;49;00m
        #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_docker_compose_services_start#x1B[39;49;00m(#x1B[96mself#x1B[39;49;00m, repo_root, tmp_path):#x1B[90m#x1B[39;49;00m
    #x1B[90m        #x1B[39;49;00m#x1B[33m"""Test that docker-compose services can start."""#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[90m# Create a minimal .env file#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            env_file = tmp_path / #x1B[33m"#x1B[39;49;00m#x1B[33m.env#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            env_file.write_text(#x1B[33m"""#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mPROJECT_PATH=.#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mCODEWEAVER_PORT=19328#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mQDRANT_PORT=16333#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mQDRANT_GRPC_PORT=16334#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mVOYAGE_API_KEY=test-key#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mCOLLECTION_NAME=test-collection#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mENABLE_TELEMETRY=false#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mLOG_LEVEL=DEBUG#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33m"""#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            compose_file = repo_root / #x1B[33m"#x1B[39;49;00m#x1B[33mdocker-compose.yml#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[90m# Start services#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;               result = run_command(#x1B[90m#x1B[39;49;00m
                    [#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mdocker#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mcompose#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m-f#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[96mstr#x1B[39;49;00m(compose_file),#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m--env-file#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[96mstr#x1B[39;49;00m(env_file),#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mup#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m-d#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                    ],#x1B[90m#x1B[39;49;00m
                    check=#x1B[94mTrue#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                )#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/test_docker.py#x1B[0m:188: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31mtests/integration/test_docker.py#x1B[0m:43: in run_command
    #x1B[0m#x1B[94mreturn#x1B[39;49;00m subprocess.run(cmd, check=check, capture_output=capture, text=#x1B[94mTrue#x1B[39;49;00m, timeout=#x1B[94m300#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

input = None, capture_output = True, timeout = 300, check = True
popenargs = (['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_docker_compose_services_s0/.env', ...],)
kwargs = {'stderr': -1, 'stdout': -1, 'text': True}
process = &lt;Popen: returncode: 1 args: ['docker', 'compose', '-f', '/home/knitli/codewe...&gt;
stdout = '#1 [internal] load local bake definitions\n#1 reading from stdin 521B done\n#1 DONE 0.0s\n\n#2 [internal] load build ...y/codeweaver-codeweaver:latest 0.0s done\n#23 DONE 0.2s\n\n#24 resolving provenance for metadata file\n#24 DONE 0.0s\n'
stderr = ' codeweaver-codeweaver  Built\n Network codeweaver_codeweaver-network  Creating\n Network codeweaver_codeweaver-netwo...  Waiting\n Container codeweaver-qdrant  Error\ndependency failed to start: container codeweaver-qdrant is unhealthy\n'
retcode = 1

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mrun#x1B[39;49;00m(*popenargs,#x1B[90m#x1B[39;49;00m
            #x1B[96minput#x1B[39;49;00m=#x1B[94mNone#x1B[39;49;00m, capture_output=#x1B[94mFalse#x1B[39;49;00m, timeout=#x1B[94mNone#x1B[39;49;00m, check=#x1B[94mFalse#x1B[39;49;00m, **kwargs):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Run command with arguments and return a CompletedProcess instance.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    The returned instance will have attributes args, returncode, stdout and#x1B[39;49;00m
    #x1B[33m    stderr. By default, stdout and stderr are not captured, and those attributes#x1B[39;49;00m
    #x1B[33m    will be None. Pass stdout=PIPE and/or stderr=PIPE in order to capture them,#x1B[39;49;00m
    #x1B[33m    or pass capture_output=True to capture both.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    If check is True and the exit code was non-zero, it raises a#x1B[39;49;00m
    #x1B[33m    CalledProcessError. The CalledProcessError object will have the return code#x1B[39;49;00m
    #x1B[33m    in the returncode attribute, and output &amp; stderr attributes if those streams#x1B[39;49;00m
    #x1B[33m    were captured.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    If timeout (seconds) is given and the process takes too long,#x1B[39;49;00m
    #x1B[33m     a TimeoutExpired exception will be raised.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    There is an optional argument "input", allowing you to#x1B[39;49;00m
    #x1B[33m    pass bytes or a string to the subprocess's stdin.  If you use this argument#x1B[39;49;00m
    #x1B[33m    you may not also use the Popen constructor's "stdin" argument, as#x1B[39;49;00m
    #x1B[33m    it will be used internally.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    By default, all communication is in bytes, and therefore any "input" should#x1B[39;49;00m
    #x1B[33m    be bytes, and the stdout and stderr will be bytes. If in text mode, any#x1B[39;49;00m
    #x1B[33m    "input" should be a string, and stdout and stderr will be strings decoded#x1B[39;49;00m
    #x1B[33m    according to locale encoding, or by "encoding" if set. Text mode is#x1B[39;49;00m
    #x1B[33m    triggered by setting any of text, encoding, errors or universal_newlines.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    The other arguments are the same as for the Popen constructor.#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m #x1B[96minput#x1B[39;49;00m #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstdin#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m #x1B[96mValueError#x1B[39;49;00m(#x1B[33m'#x1B[39;49;00m#x1B[33mstdin and input arguments may not both be used.#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstdin#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m capture_output:#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstdout#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m #x1B[95mor#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstderr#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m #x1B[96mValueError#x1B[39;49;00m(#x1B[33m'#x1B[39;49;00m#x1B[33mstdout and stderr arguments may not be used #x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                                 #x1B[33m'#x1B[39;49;00m#x1B[33mwith capture_output.#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstdout#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstderr#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mwith#x1B[39;49;00m Popen(*popenargs, **kwargs) #x1B[94mas#x1B[39;49;00m process:#x1B[90m#x1B[39;49;00m
            #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                stdout, stderr = process.communicate(#x1B[96minput#x1B[39;49;00m, timeout=timeout)#x1B[90m#x1B[39;49;00m
            #x1B[94mexcept#x1B[39;49;00m TimeoutExpired #x1B[94mas#x1B[39;49;00m exc:#x1B[90m#x1B[39;49;00m
                process.kill()#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m _mswindows:#x1B[90m#x1B[39;49;00m
                    #x1B[90m# Windows accumulates the output in a single blocking#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# read() call run on child threads, with the timeout#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# being done in a join() on those threads.  communicate()#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# _after_ kill() is required to collect that and add it#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# to the exception.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    exc.stdout, exc.stderr = process.communicate()#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                    #x1B[90m# POSIX _communicate already populated the output so#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# far into the TimeoutExpired exception.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    process.wait()#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mexcept#x1B[39;49;00m:  #x1B[90m# Including KeyboardInterrupt, communicate handled that.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                process.kill()#x1B[90m#x1B[39;49;00m
                #x1B[90m# We don't call process.wait() as .__exit__ does that for us.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            retcode = process.poll()#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m check #x1B[95mand#x1B[39;49;00m retcode:#x1B[90m#x1B[39;49;00m
&gt;               #x1B[94mraise#x1B[39;49;00m CalledProcessError(retcode, process.args,#x1B[90m#x1B[39;49;00m
                                         output=stdout, stderr=stderr)#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE               subprocess.CalledProcessError: Command '['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_docker_compose_services_s0/.env', 'up', '-d']' returned non-zero exit status 1.#x1B[0m

#x1B[1m#x1B[31m../.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py#x1B[0m:577: CalledProcessError</failure></testcase><testcase classname="tests.integration.test_docker.TestDockerCompose" name="test_qdrant_health_endpoint" time="54.573"><failure message="subprocess.CalledProcessError: Command '['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_qdrant_health_endpoint0/.env', 'up', '-d']' returned non-zero exit status 1.">self = &lt;tests.integration.test_docker.TestDockerCompose object at 0x752b8aa1bbf0&gt;
repo_root = PosixPath('/home/knitli/codeweaver')
tmp_path = PosixPath('/tmp/pytest-of-knitli/pytest-67/test_qdrant_health_endpoint0')

    #x1B[0m    #x1B[37m@pytest#x1B[39;49;00m.mark.slow#x1B[90m#x1B[39;49;00m
        #x1B[37m@pytest#x1B[39;49;00m.mark.network#x1B[90m#x1B[39;49;00m
        #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_qdrant_health_endpoint#x1B[39;49;00m(#x1B[96mself#x1B[39;49;00m, repo_root, tmp_path):#x1B[90m#x1B[39;49;00m
    #x1B[90m        #x1B[39;49;00m#x1B[33m"""Test that Qdrant health endpoint is accessible."""#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            env_file = tmp_path / #x1B[33m"#x1B[39;49;00m#x1B[33m.env#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            env_file.write_text(#x1B[33m"""#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mPROJECT_PATH=.#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mCODEWEAVER_PORT=19328#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mQDRANT_PORT=16333#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mQDRANT_GRPC_PORT=16334#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mVOYAGE_API_KEY=test-key#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mCOLLECTION_NAME=test-collection#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33mENABLE_TELEMETRY=false#x1B[39;49;00m#x1B[33m#x1B[39;49;00m
    #x1B[33m"""#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            compose_file = repo_root / #x1B[33m"#x1B[39;49;00m#x1B[33mdocker-compose.yml#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[90m# Start services#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;               run_command(#x1B[90m#x1B[39;49;00m
                    [#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mdocker#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mcompose#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m-f#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[96mstr#x1B[39;49;00m(compose_file),#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m--env-file#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[96mstr#x1B[39;49;00m(env_file),#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mup#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33m-d#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                    ],#x1B[90m#x1B[39;49;00m
                    check=#x1B[94mTrue#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                )#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/test_docker.py#x1B[0m:246: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31mtests/integration/test_docker.py#x1B[0m:43: in run_command
    #x1B[0m#x1B[94mreturn#x1B[39;49;00m subprocess.run(cmd, check=check, capture_output=capture, text=#x1B[94mTrue#x1B[39;49;00m, timeout=#x1B[94m300#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

input = None, capture_output = True, timeout = 300, check = True
popenargs = (['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_qdrant_health_endpoint0/.env', ...],)
kwargs = {'stderr': -1, 'stdout': -1, 'text': True}
process = &lt;Popen: returncode: 1 args: ['docker', 'compose', '-f', '/home/knitli/codewe...&gt;
stdout = ''
stderr = ' Network codeweaver_codeweaver-network  Creating\n Network codeweaver_codeweaver-network  Created\n Volume codeweaver...  Waiting\n Container codeweaver-qdrant  Error\ndependency failed to start: container codeweaver-qdrant is unhealthy\n'
retcode = 1

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mrun#x1B[39;49;00m(*popenargs,#x1B[90m#x1B[39;49;00m
            #x1B[96minput#x1B[39;49;00m=#x1B[94mNone#x1B[39;49;00m, capture_output=#x1B[94mFalse#x1B[39;49;00m, timeout=#x1B[94mNone#x1B[39;49;00m, check=#x1B[94mFalse#x1B[39;49;00m, **kwargs):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Run command with arguments and return a CompletedProcess instance.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    The returned instance will have attributes args, returncode, stdout and#x1B[39;49;00m
    #x1B[33m    stderr. By default, stdout and stderr are not captured, and those attributes#x1B[39;49;00m
    #x1B[33m    will be None. Pass stdout=PIPE and/or stderr=PIPE in order to capture them,#x1B[39;49;00m
    #x1B[33m    or pass capture_output=True to capture both.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    If check is True and the exit code was non-zero, it raises a#x1B[39;49;00m
    #x1B[33m    CalledProcessError. The CalledProcessError object will have the return code#x1B[39;49;00m
    #x1B[33m    in the returncode attribute, and output &amp; stderr attributes if those streams#x1B[39;49;00m
    #x1B[33m    were captured.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    If timeout (seconds) is given and the process takes too long,#x1B[39;49;00m
    #x1B[33m     a TimeoutExpired exception will be raised.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    There is an optional argument "input", allowing you to#x1B[39;49;00m
    #x1B[33m    pass bytes or a string to the subprocess's stdin.  If you use this argument#x1B[39;49;00m
    #x1B[33m    you may not also use the Popen constructor's "stdin" argument, as#x1B[39;49;00m
    #x1B[33m    it will be used internally.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    By default, all communication is in bytes, and therefore any "input" should#x1B[39;49;00m
    #x1B[33m    be bytes, and the stdout and stderr will be bytes. If in text mode, any#x1B[39;49;00m
    #x1B[33m    "input" should be a string, and stdout and stderr will be strings decoded#x1B[39;49;00m
    #x1B[33m    according to locale encoding, or by "encoding" if set. Text mode is#x1B[39;49;00m
    #x1B[33m    triggered by setting any of text, encoding, errors or universal_newlines.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    The other arguments are the same as for the Popen constructor.#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m #x1B[96minput#x1B[39;49;00m #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstdin#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m #x1B[96mValueError#x1B[39;49;00m(#x1B[33m'#x1B[39;49;00m#x1B[33mstdin and input arguments may not both be used.#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstdin#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m capture_output:#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstdout#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m #x1B[95mor#x1B[39;49;00m kwargs.get(#x1B[33m'#x1B[39;49;00m#x1B[33mstderr#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m) #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m #x1B[96mValueError#x1B[39;49;00m(#x1B[33m'#x1B[39;49;00m#x1B[33mstdout and stderr arguments may not be used #x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                                 #x1B[33m'#x1B[39;49;00m#x1B[33mwith capture_output.#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstdout#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
            kwargs[#x1B[33m'#x1B[39;49;00m#x1B[33mstderr#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m] = PIPE#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mwith#x1B[39;49;00m Popen(*popenargs, **kwargs) #x1B[94mas#x1B[39;49;00m process:#x1B[90m#x1B[39;49;00m
            #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                stdout, stderr = process.communicate(#x1B[96minput#x1B[39;49;00m, timeout=timeout)#x1B[90m#x1B[39;49;00m
            #x1B[94mexcept#x1B[39;49;00m TimeoutExpired #x1B[94mas#x1B[39;49;00m exc:#x1B[90m#x1B[39;49;00m
                process.kill()#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m _mswindows:#x1B[90m#x1B[39;49;00m
                    #x1B[90m# Windows accumulates the output in a single blocking#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# read() call run on child threads, with the timeout#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# being done in a join() on those threads.  communicate()#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# _after_ kill() is required to collect that and add it#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# to the exception.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    exc.stdout, exc.stderr = process.communicate()#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                    #x1B[90m# POSIX _communicate already populated the output so#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    #x1B[90m# far into the TimeoutExpired exception.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                    process.wait()#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mexcept#x1B[39;49;00m:  #x1B[90m# Including KeyboardInterrupt, communicate handled that.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                process.kill()#x1B[90m#x1B[39;49;00m
                #x1B[90m# We don't call process.wait() as .__exit__ does that for us.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mraise#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            retcode = process.poll()#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m check #x1B[95mand#x1B[39;49;00m retcode:#x1B[90m#x1B[39;49;00m
&gt;               #x1B[94mraise#x1B[39;49;00m CalledProcessError(retcode, process.args,#x1B[90m#x1B[39;49;00m
                                         output=stdout, stderr=stderr)#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE               subprocess.CalledProcessError: Command '['docker', 'compose', '-f', '/home/knitli/codeweaver/docker-compose.yml', '--env-file', '/tmp/pytest-of-knitli/pytest-67/test_qdrant_health_endpoint0/.env', 'up', '-d']' returned non-zero exit status 1.#x1B[0m

#x1B[1m#x1B[31m../.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/subprocess.py#x1B[0m:577: CalledProcessError</failure></testcase><testcase classname="tests.integration.test_docker.TestDockerIgnore" name="test_dockerignore_exists" time="0.003" /><testcase classname="tests.integration.test_docker.TestDockerIgnore" name="test_dockerignore_excludes_common_patterns" time="0.002" /><testcase classname="tests.integration.test_docker.TestEnvironmentFile" name="test_env_example_exists" time="0.003" /><testcase classname="tests.integration.test_docker.TestEnvironmentFile" name="test_env_example_has_required_variables" time="0.003" /><testcase classname="tests.integration.test_docker.TestEnvironmentFile" name="test_env_example_has_license_header" time="0.002" /><testcase classname="tests.integration.test_error_recovery" name="test_sparse_only_fallback" time="0.831" /><testcase classname="tests.integration.test_error_recovery" name="test_circuit_breaker_opens" time="0.007" /><testcase classname="tests.integration.test_error_recovery" name="test_circuit_breaker_half_open" time="0.005" /><testcase classname="tests.integration.test_error_recovery" name="test_indexing_continues_on_file_errors" time="7.589" /><testcase classname="tests.integration.test_error_recovery" name="test_warning_at_25_errors" time="2.080" /><testcase classname="tests.integration.test_error_recovery" name="test_health_shows_degraded_status" time="0.190" /><testcase classname="tests.integration.test_error_recovery" name="test_retry_with_exponential_backoff" time="3.044"><failure message="AssertionError: First retry delay: 0.5133585929870605s (expected ~1s)&#10;assert 0.8 &lt; 0.5133585929870605">#x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.integration#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_retry_with_exponential_backoff#x1B[39;49;00m():#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""T013: Failed requests retry with exponential backoff.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Given: Embedding API experiencing transient errors#x1B[39;49;00m
    #x1B[33m    When: Request fails initially#x1B[39;49;00m
    #x1B[33m    Then: Retries with 1s, 2s, 4s, 8s backoff (spec FR-009c)#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Create flaky provider mock#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        provider = create_flaky_provider_mock()#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Simulate retry logic with exponential backoff#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mretry_with_backoff#x1B[39;49;00m():#x1B[90m#x1B[39;49;00m
            max_attempts = #x1B[94m5#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            base_delay = #x1B[94m1.0#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[94mfor#x1B[39;49;00m attempt #x1B[95min#x1B[39;49;00m #x1B[96mrange#x1B[39;49;00m(max_attempts):#x1B[90m#x1B[39;49;00m
                #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                    #x1B[94mreturn#x1B[39;49;00m #x1B[94mawait#x1B[39;49;00m provider.embed_query(#x1B[33m"#x1B[39;49;00m#x1B[33mtest query#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
                    #x1B[90m# Success - return result#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mexcept#x1B[39;49;00m #x1B[96mConnectionError#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                    #x1B[94mif#x1B[39;49;00m attempt &lt; max_attempts - #x1B[94m1#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                        #x1B[90m# Calculate exponential backoff delay: 1s, 2s, 4s, 8s#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                        delay = #x1B[96mmin#x1B[39;49;00m(base_delay * (#x1B[94m2#x1B[39;49;00m**attempt), #x1B[94m16#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
                        #x1B[94mawait#x1B[39;49;00m asyncio.sleep(delay)#x1B[90m#x1B[39;49;00m
                    #x1B[94melse#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
                        #x1B[94mraise#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mreturn#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Should succeed after retries#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        result = #x1B[94mawait#x1B[39;49;00m retry_with_backoff()#x1B[90m#x1B[39;49;00m
        #x1B[94massert#x1B[39;49;00m result #x1B[95mis#x1B[39;49;00m #x1B[95mnot#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94massert#x1B[39;49;00m result == [[#x1B[94m0.1#x1B[39;49;00m, #x1B[94m0.2#x1B[39;49;00m, #x1B[94m0.3#x1B[39;49;00m]]#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Access attempt data from mock#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        attempt_data = provider._attempt_data#x1B[90m#x1B[39;49;00m
        #x1B[94massert#x1B[39;49;00m attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mcount#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m][#x1B[33m"#x1B[39;49;00m#x1B[33mvalue#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m] == #x1B[94m3#x1B[39;49;00m  #x1B[90m# Should have made 3 attempts#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Verify exponential backoff timing if we have enough attempts#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mtimes#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m]) &gt;= #x1B[94m3#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
            delay1 = attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mtimes#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m][#x1B[94m1#x1B[39;49;00m] - attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mtimes#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m][#x1B[94m0#x1B[39;49;00m]#x1B[90m#x1B[39;49;00m
            delay2 = attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mtimes#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m][#x1B[94m2#x1B[39;49;00m] - attempt_data[#x1B[33m"#x1B[39;49;00m#x1B[33mtimes#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m][#x1B[94m1#x1B[39;49;00m]#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# First retry after ~1s, second after ~2s#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[90m# Allow some tolerance for execution time#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;           #x1B[94massert#x1B[39;49;00m #x1B[94m0.8#x1B[39;49;00m &lt; delay1 &lt; #x1B[94m1.5#x1B[39;49;00m, #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mFirst retry delay: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00mdelay1#x1B[33m}#x1B[39;49;00m#x1B[33ms (expected ~1s)#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE           AssertionError: First retry delay: 0.5133585929870605s (expected ~1s)#x1B[0m
#x1B[1m#x1B[31mE           assert 0.8 &lt; 0.5133585929870605#x1B[0m

#x1B[1m#x1B[31mtests/integration/test_error_recovery.py#x1B[0m:489: AssertionError</failure></testcase><testcase classname="tests.integration.test_error_recovery" name="test_graceful_shutdown_with_checkpoint" time="0.052" /><testcase classname="tests.integration.test_error_recovery" name="test_error_logging_structured" time="0.351" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_endpoint_responds" time="0.124" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_response_schema_validation" time="0.120" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_during_indexing" time="0.128" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_status_healthy" time="0.131"><failure message="AssertionError: assert 'degraded' == 'healthy'&#10;  &#10;  #x1B[0m#x1B[91m- healthy#x1B[39;49;00m#x1B[90m#x1B[39;49;00m&#10;  #x1B[92m+ degraded#x1B[39;49;00m#x1B[90m#x1B[39;49;00m">health_service = &lt;codeweaver.server.health_service.HealthService object at 0x752b610cab10&gt;

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.integration#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_health_status_healthy#x1B[39;49;00m(health_service: HealthService):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""T012: Health status determined as 'healthy' when all services up.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Given: All services operational, indexing idle or progressing normally#x1B[39;49;00m
    #x1B[33m    When: get_health_response() called#x1B[39;49;00m
    #x1B[33m    Then: Status is 'healthy'#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        response = #x1B[94mawait#x1B[39;49;00m health_service.get_health_response()#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# With mock providers all returning "up", should be healthy#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       #x1B[94massert#x1B[39;49;00m response.status == #x1B[33m"#x1B[39;49;00m#x1B[33mhealthy#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       AssertionError: assert 'degraded' == 'healthy'#x1B[0m
#x1B[1m#x1B[31mE         #x1B[0m
#x1B[1m#x1B[31mE         #x1B[0m#x1B[91m- healthy#x1B[39;49;00m#x1B[90m#x1B[39;49;00m#x1B[0m
#x1B[1m#x1B[31mE         #x1B[92m+ degraded#x1B[39;49;00m#x1B[90m#x1B[39;49;00m#x1B[0m

#x1B[1m#x1B[31mtests/integration/test_health_monitoring.py#x1B[0m:336: AssertionError</failure></testcase><testcase classname="tests.integration.test_health_monitoring" name="test_health_status_degraded" time="0.117" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_status_unhealthy" time="0.120" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_indexing_progress" time="0.345" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_service_states" time="0.123" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_circuit_breaker_exposure" time="0.346" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_statistics" time="0.122" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_performance" time="11.214" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_parallel_component_collection" time="0.131" /><testcase classname="tests.integration.test_health_monitoring" name="test_health_json_serialization" time="0.123" /><testcase classname="tests.integration.test_hybrid_ranking" name="test_hybrid_search_ranking" time="0.434" /><testcase classname="tests.integration.test_hybrid_storage" name="test_store_hybrid_embeddings" time="0.432" /><testcase classname="tests.integration.test_incremental_updates" name="test_incremental_updates" time="0.375" /><testcase classname="tests.integration.test_memory_persistence" name="test_inmemory_persistence" time="0.307" /><testcase classname="tests.integration.test_model_switch" name="test_model_switch_detection" time="0.003" /><testcase classname="tests.integration.test_model_switch" name="test_provider_switch_warning" time="0.004" /><testcase classname="tests.integration.test_model_switch" name="test_dimension_mismatch_detection" time="0.004" /><testcase classname="tests.integration.test_model_switch" name="test_compatible_metadata_no_error" time="0.002" /><testcase classname="tests.integration.test_model_switch" name="test_model_switch_with_none_embedding" time="0.002" /><testcase classname="tests.integration.test_partial_embeddings" name="test_partial_embeddings" time="0.373" /><testcase classname="tests.integration.test_persistence" name="test_persistence_across_restarts" time="0.462" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_statistics_collection_during_failover" time="0.177" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_failover_notification_sent" time="0.180" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_restoration_notification_sent" time="0.173" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_health_endpoint_includes_failover_info" time="3.213" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_health_endpoint_during_failover" time="3.565" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_status_endpoint_structure" time="0.003" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_find_code_metadata_population" time="0.129" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_statistics_update_granular_control" time="0.004" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4StatusFlow" name="test_end_to_end_failover_flow" time="3.516" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4CLIStatus" name="test_status_command_imports" time="0.005" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4CLIStatus" name="test_format_duration_utility" time="0.002" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4CLIStatus" name="test_status_command_registered" time="0.004" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4FailoverStats" name="test_failover_stats_creation" time="0.002" /><testcase classname="tests.integration.test_phase4_status_flow.TestPhase4FailoverStats" name="test_failover_stats_serialization" time="0.002" /><testcase classname="tests.integration.test_reference_queries" name="test_reference_queries_comprehensive" time="5.008" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[0]" time="3.988" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[1]" time="0.626" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[2]" time="0.572" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[3]" time="0.546" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[4]" time="0.599" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[5]" time="0.606" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[6]" time="0.529" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[7]" time="0.542" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[8]" time="0.576" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[9]" time="0.593" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[10]" time="0.551"><failure message="pydantic_core._pydantic_core.ValidationError: 1 validation error for FindCodeResponseSummary&#10;execution_time_ms&#10;  Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-8426.968336105347, input_type=float]&#10;    For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal">query_index = 10

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.integration#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.parametrize(#x1B[90m#x1B[39;49;00m
        #x1B[33m"#x1B[39;49;00m#x1B[33mquery_index#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        #x1B[96mrange#x1B[39;49;00m(#x1B[94m25#x1B[39;49;00m),  #x1B[90m# 25 reference queries in fixture#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    )#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_individual_reference_query#x1B[39;49;00m(query_index: #x1B[96mint#x1B[39;49;00m) -&gt; #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Test individual reference queries for targeted debugging.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    This parametrized test allows running specific queries:#x1B[39;49;00m
    #x1B[33m        pytest tests/integration/test_reference_queries.py::test_individual_reference_query[5]#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Useful for debugging specific query failures without running full suite.#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        queries = load_reference_queries()#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m query_index &gt;= #x1B[96mlen#x1B[39;49;00m(queries):#x1B[90m#x1B[39;49;00m
            pytest.skip(#x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mQuery index #x1B[39;49;00m#x1B[33m{#x1B[39;49;00mquery_index#x1B[33m}#x1B[39;49;00m#x1B[33m out of range (max: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mlen#x1B[39;49;00m(queries)#x1B[90m #x1B[39;49;00m-#x1B[90m #x1B[39;49;00m#x1B[94m1#x1B[39;49;00m#x1B[33m}#x1B[39;49;00m#x1B[33m)#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        test_case = queries[query_index]#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        logger.info(#x1B[33m"#x1B[39;49;00m#x1B[33mTesting query: #x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[33m%s#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, test_case.query)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Execute find_code#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       response = #x1B[94mawait#x1B[39;49;00m find_code(test_case.query, intent=test_case.intent, max_results=#x1B[94m10#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/test_reference_queries.py#x1B[0m:356: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/__init__.py#x1B[0m:404: in find_code
    #x1B[0merror_response = build_error_response(e, intent, execution_time_ms)#x1B[90m#x1B[39;49;00m
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

error = ProviderError('Search operation failed: Unexpected Response: 400 (Bad Request)\nRaw response content:\nb\'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 512, got 384"},"time":0.001635796}\'')
query_intent = &lt;IntentType.IMPLEMENT: 'implement'&gt;
execution_time_ms = -8426.968336105347

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mbuild_error_response#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        error: #x1B[96mException#x1B[39;49;00m, query_intent: IntentType | #x1B[94mNone#x1B[39;49;00m, execution_time_ms: #x1B[96mfloat#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    ) -&gt; FindCodeResponseSummary:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Build an error response with graceful degradation.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        error: Exception that occurred#x1B[39;49;00m
    #x1B[33m        query_intent: Optional detected query intent#x1B[39;49;00m
    #x1B[33m        execution_time_ms: Execution time in milliseconds#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        FindCodeResponseSummary indicating failure#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Get indexing state from global application state#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        indexing_state, index_coverage = get_indexer_state_info()#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mcommon#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mregistry#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mprovider#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m get_provider_registry#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mproviders#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mvector_stores#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mbase#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m VectorStoreProvider#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        mode = #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mwith#x1B[39;49;00m contextlib.suppress(#x1B[96mException#x1B[39;49;00m):#x1B[90m#x1B[39;49;00m
            registry = get_provider_registry()#x1B[90m#x1B[39;49;00m
            provider = registry.get_provider_enum_for(#x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            vector_store: VectorStoreProvider = registry.get_provider_instance(#x1B[90m#x1B[39;49;00m
                provider, #x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, singleton=#x1B[94mTrue#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )  #x1B[90m# ty: ignore[no-matching-overload]#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            capabilities = vector_store.embedding_capabilities#x1B[90m#x1B[39;49;00m
            mode = (#x1B[90m#x1B[39;49;00m
                #x1B[33m"#x1B[39;49;00m#x1B[33mhybrid#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m ((dense := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33mdense#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)) #x1B[95mand#x1B[39;49;00m (sparse := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33msparse#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)))#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m (#x1B[33m"#x1B[39;49;00m#x1B[33mdense_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m dense #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33msparse_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m sparse #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
        error_message = #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mCritical error: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mtype#x1B[39;49;00m(error).#x1B[91m__name__#x1B[39;49;00m#x1B[33m}#x1B[39;49;00m#x1B[33m: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)#x1B[33m!s}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       #x1B[94mreturn#x1B[39;49;00m FindCodeResponseSummary(#x1B[90m#x1B[39;49;00m
            matches=[],#x1B[90m#x1B[39;49;00m
            summary=#x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mSearch failed: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)[:#x1B[94m500#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            query_intent=query_intent,#x1B[90m#x1B[39;49;00m
            total_matches=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            total_results=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            token_count=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            execution_time_ms=execution_time_ms,#x1B[90m#x1B[39;49;00m
            search_strategy=(SearchStrategy.KEYWORD_FALLBACK,),#x1B[90m#x1B[39;49;00m
            languages_found=(),#x1B[90m#x1B[39;49;00m
            status=#x1B[33m"#x1B[39;49;00m#x1B[33merror#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            warnings=[(error_message #x1B[94mif#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(error_message) &lt;= #x1B[94m200#x1B[39;49;00m #x1B[94melse#x1B[39;49;00m #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33m{#x1B[39;49;00merror_message[:#x1B[94m200#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m...#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)],#x1B[90m#x1B[39;49;00m
            indexing_state=indexing_state,#x1B[90m#x1B[39;49;00m
            index_coverage=index_coverage,#x1B[90m#x1B[39;49;00m
            search_mode=mode,#x1B[90m#x1B[39;49;00m
            metadata={},#x1B[90m#x1B[39;49;00m
        )#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       pydantic_core._pydantic_core.ValidationError: 1 validation error for FindCodeResponseSummary#x1B[0m
#x1B[1m#x1B[31mE       execution_time_ms#x1B[0m
#x1B[1m#x1B[31mE         Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-8426.968336105347, input_type=float]#x1B[0m
#x1B[1m#x1B[31mE           For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal#x1B[0m

#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/response.py#x1B[0m:224: ValidationError</failure></testcase><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[11]" time="0.528" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[12]" time="0.536" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[13]" time="0.532" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[14]" time="0.527" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[15]" time="0.514" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[16]" time="0.521" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[17]" time="0.514" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[18]" time="0.533" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[19]" time="0.531" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[20]" time="0.529"><failure message="pydantic_core._pydantic_core.ValidationError: 1 validation error for FindCodeResponseSummary&#10;execution_time_ms&#10;  Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-21.542787551879883, input_type=float]&#10;    For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal">query_index = 20

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.integration#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.parametrize(#x1B[90m#x1B[39;49;00m
        #x1B[33m"#x1B[39;49;00m#x1B[33mquery_index#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        #x1B[96mrange#x1B[39;49;00m(#x1B[94m25#x1B[39;49;00m),  #x1B[90m# 25 reference queries in fixture#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    )#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_individual_reference_query#x1B[39;49;00m(query_index: #x1B[96mint#x1B[39;49;00m) -&gt; #x1B[94mNone#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Test individual reference queries for targeted debugging.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    This parametrized test allows running specific queries:#x1B[39;49;00m
    #x1B[33m        pytest tests/integration/test_reference_queries.py::test_individual_reference_query[5]#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Useful for debugging specific query failures without running full suite.#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        queries = load_reference_queries()#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mif#x1B[39;49;00m query_index &gt;= #x1B[96mlen#x1B[39;49;00m(queries):#x1B[90m#x1B[39;49;00m
            pytest.skip(#x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mQuery index #x1B[39;49;00m#x1B[33m{#x1B[39;49;00mquery_index#x1B[33m}#x1B[39;49;00m#x1B[33m out of range (max: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mlen#x1B[39;49;00m(queries)#x1B[90m #x1B[39;49;00m-#x1B[90m #x1B[39;49;00m#x1B[94m1#x1B[39;49;00m#x1B[33m}#x1B[39;49;00m#x1B[33m)#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        test_case = queries[query_index]#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        logger.info(#x1B[33m"#x1B[39;49;00m#x1B[33mTesting query: #x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[33m%s#x1B[39;49;00m#x1B[33m'#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, test_case.query)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[90m# Execute find_code#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       response = #x1B[94mawait#x1B[39;49;00m find_code(test_case.query, intent=test_case.intent, max_results=#x1B[94m10#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/test_reference_queries.py#x1B[0m:356: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/__init__.py#x1B[0m:404: in find_code
    #x1B[0merror_response = build_error_response(e, intent, execution_time_ms)#x1B[90m#x1B[39;49;00m
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

error = ProviderError('Search operation failed: Unexpected Response: 400 (Bad Request)\nRaw response content:\nb\'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 512, got 384"},"time":0.001261979}\'')
query_intent = &lt;IntentType.TEST: 'test'&gt;
execution_time_ms = -21.542787551879883

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mbuild_error_response#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        error: #x1B[96mException#x1B[39;49;00m, query_intent: IntentType | #x1B[94mNone#x1B[39;49;00m, execution_time_ms: #x1B[96mfloat#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    ) -&gt; FindCodeResponseSummary:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Build an error response with graceful degradation.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        error: Exception that occurred#x1B[39;49;00m
    #x1B[33m        query_intent: Optional detected query intent#x1B[39;49;00m
    #x1B[33m        execution_time_ms: Execution time in milliseconds#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        FindCodeResponseSummary indicating failure#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Get indexing state from global application state#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        indexing_state, index_coverage = get_indexer_state_info()#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mcommon#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mregistry#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mprovider#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m get_provider_registry#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mproviders#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mvector_stores#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mbase#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m VectorStoreProvider#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        mode = #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mwith#x1B[39;49;00m contextlib.suppress(#x1B[96mException#x1B[39;49;00m):#x1B[90m#x1B[39;49;00m
            registry = get_provider_registry()#x1B[90m#x1B[39;49;00m
            provider = registry.get_provider_enum_for(#x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            vector_store: VectorStoreProvider = registry.get_provider_instance(#x1B[90m#x1B[39;49;00m
                provider, #x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, singleton=#x1B[94mTrue#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )  #x1B[90m# ty: ignore[no-matching-overload]#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            capabilities = vector_store.embedding_capabilities#x1B[90m#x1B[39;49;00m
            mode = (#x1B[90m#x1B[39;49;00m
                #x1B[33m"#x1B[39;49;00m#x1B[33mhybrid#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m ((dense := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33mdense#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)) #x1B[95mand#x1B[39;49;00m (sparse := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33msparse#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)))#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m (#x1B[33m"#x1B[39;49;00m#x1B[33mdense_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m dense #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33msparse_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m sparse #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
        error_message = #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mCritical error: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mtype#x1B[39;49;00m(error).#x1B[91m__name__#x1B[39;49;00m#x1B[33m}#x1B[39;49;00m#x1B[33m: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)#x1B[33m!s}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       #x1B[94mreturn#x1B[39;49;00m FindCodeResponseSummary(#x1B[90m#x1B[39;49;00m
            matches=[],#x1B[90m#x1B[39;49;00m
            summary=#x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mSearch failed: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)[:#x1B[94m500#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            query_intent=query_intent,#x1B[90m#x1B[39;49;00m
            total_matches=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            total_results=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            token_count=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            execution_time_ms=execution_time_ms,#x1B[90m#x1B[39;49;00m
            search_strategy=(SearchStrategy.KEYWORD_FALLBACK,),#x1B[90m#x1B[39;49;00m
            languages_found=(),#x1B[90m#x1B[39;49;00m
            status=#x1B[33m"#x1B[39;49;00m#x1B[33merror#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            warnings=[(error_message #x1B[94mif#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(error_message) &lt;= #x1B[94m200#x1B[39;49;00m #x1B[94melse#x1B[39;49;00m #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33m{#x1B[39;49;00merror_message[:#x1B[94m200#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m...#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)],#x1B[90m#x1B[39;49;00m
            indexing_state=indexing_state,#x1B[90m#x1B[39;49;00m
            index_coverage=index_coverage,#x1B[90m#x1B[39;49;00m
            search_mode=mode,#x1B[90m#x1B[39;49;00m
            metadata={},#x1B[90m#x1B[39;49;00m
        )#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       pydantic_core._pydantic_core.ValidationError: 1 validation error for FindCodeResponseSummary#x1B[0m
#x1B[1m#x1B[31mE       execution_time_ms#x1B[0m
#x1B[1m#x1B[31mE         Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-21.542787551879883, input_type=float]#x1B[0m
#x1B[1m#x1B[31mE           For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal#x1B[0m

#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/response.py#x1B[0m:224: ValidationError</failure></testcase><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[21]" time="0.496" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[22]" time="0.556" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[23]" time="0.490" /><testcase classname="tests.integration.test_reference_queries" name="test_individual_reference_query[24]" time="0.519" /><testcase classname="tests.integration.test_reference_queries" name="test_intent_coverage_complete" time="0.002" /><testcase classname="tests.integration.test_reference_queries" name="test_query_diversity_metrics" time="0.004" /><testcase classname="tests.integration.test_search_workflows" name="test_cli_search_returns_results" time="0.482" /><testcase classname="tests.integration.test_search_workflows" name="test_cli_search_output_formats" time="0.481" /><testcase classname="tests.integration.test_search_workflows" name="test_mcp_find_code_tool" time="0.529" /><testcase classname="tests.integration.test_search_workflows" name="test_mcp_find_code_required_parameters" time="0.957" /><testcase classname="tests.integration.test_search_workflows" name="test_search_with_intent_parameter" time="0.892"><failure message="codeweaver.exceptions.QueryError: Unexpected error in find_code: 1 validation error for FindCodeResponseSummary&#10;execution_time_ms&#10;  Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-98.56653213500977, input_type=float]&#10;    For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal&#10;&#10;Encountered error in 'codeweaver.server.app_bindings' at /home/knitli/codeweaver/src/codeweaver/server/app_bindings.py:151&#10;&#10;CodeWeaver is in alpha. Please report possible bugs at https://github.com/knitli/codeweaver/issues&#10;&#10;If you're not sure something is a bug, you can open a discussion at: https://github.com/knitli/codeweaver/discussions&#10;&#10;Thank you for helping us improve CodeWeaver!">query = 'authentication logic', intent = &lt;IntentType.IMPLEMENT: 'implement'&gt;

    #x1B[0m#x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mfind_code_tool#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        query: #x1B[96mstr#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        intent: IntentType | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        *,#x1B[90m#x1B[39;49;00m
        token_limit: #x1B[96mint#x1B[39;49;00m = #x1B[94m30000#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        focus_languages: #x1B[96mtuple#x1B[39;49;00m[SemanticSearchLanguage, ...] | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        context: Context | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
    ) -&gt; FindCodeResponseSummary:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Use CodeWeaver to find code in the codebase.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        query: Natural language search query#x1B[39;49;00m
    #x1B[33m        intent: Optional search intent (if None, will be detected)#x1B[39;49;00m
    #x1B[33m        token_limit: Maximum tokens to return (default: 30000)#x1B[39;49;00m
    #x1B[33m        include_tests: Whether to include test files in results#x1B[39;49;00m
    #x1B[33m        focus_languages: Optional language filter#x1B[39;49;00m
    #x1B[33m        context: MCP context for request tracking#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        FindCodeResponseSummary with ranked matches and metadata#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Raises:#x1B[39;49;00m
    #x1B[33m        QueryError: If search fails unexpectedly#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
            #x1B[90m# Call the real find_code implementation#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[90m# Convert focus_languages from SemanticSearchLanguage to str tuple#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            focus_langs = (#x1B[90m#x1B[39;49;00m
                #x1B[96mtuple#x1B[39;49;00m(lang.value #x1B[94mif#x1B[39;49;00m #x1B[96mhasattr#x1B[39;49;00m(lang, #x1B[33m"#x1B[39;49;00m#x1B[33mvalue#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m) #x1B[94melse#x1B[39;49;00m #x1B[96mstr#x1B[39;49;00m(lang) #x1B[94mfor#x1B[39;49;00m lang #x1B[95min#x1B[39;49;00m focus_languages)#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m focus_languages#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# Set context on failover manager for notifications#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mserver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mserver#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m get_state#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            state = get_state()#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m state.failover_manager #x1B[95mand#x1B[39;49;00m context:#x1B[90m#x1B[39;49;00m
                state.failover_manager.set_context(context)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
&gt;           response = #x1B[94mawait#x1B[39;49;00m find_code(#x1B[90m#x1B[39;49;00m
                query=query,#x1B[90m#x1B[39;49;00m
                intent=intent,#x1B[90m#x1B[39;49;00m
                token_limit=token_limit,#x1B[90m#x1B[39;49;00m
                focus_languages=focus_langs,#x1B[90m#x1B[39;49;00m
                max_results=#x1B[94m30#x1B[39;49;00m,  #x1B[90m# Default from find_code signature#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31msrc/codeweaver/server/app_bindings.py#x1B[0m:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/__init__.py#x1B[0m:404: in find_code
    #x1B[0merror_response = build_error_response(e, intent, execution_time_ms)#x1B[90m#x1B[39;49;00m
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^#x1B[90m#x1B[39;49;00m
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

error = ProviderError('Search operation failed: Unexpected Response: 400 (Bad Request)\nRaw response content:\nb\'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 512, got 384"},"time":0.000365614}\'')
query_intent = &lt;IntentType.IMPLEMENT: 'implement'&gt;
execution_time_ms = -98.56653213500977

    #x1B[0m#x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mbuild_error_response#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        error: #x1B[96mException#x1B[39;49;00m, query_intent: IntentType | #x1B[94mNone#x1B[39;49;00m, execution_time_ms: #x1B[96mfloat#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
    ) -&gt; FindCodeResponseSummary:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Build an error response with graceful degradation.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        error: Exception that occurred#x1B[39;49;00m
    #x1B[33m        query_intent: Optional detected query intent#x1B[39;49;00m
    #x1B[33m        execution_time_ms: Execution time in milliseconds#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        FindCodeResponseSummary indicating failure#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[90m# Get indexing state from global application state#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        indexing_state, index_coverage = get_indexer_state_info()#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mcommon#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mregistry#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mprovider#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m get_provider_registry#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mproviders#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mvector_stores#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mbase#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m VectorStoreProvider#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        mode = #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mwith#x1B[39;49;00m contextlib.suppress(#x1B[96mException#x1B[39;49;00m):#x1B[90m#x1B[39;49;00m
            registry = get_provider_registry()#x1B[90m#x1B[39;49;00m
            provider = registry.get_provider_enum_for(#x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            vector_store: VectorStoreProvider = registry.get_provider_instance(#x1B[90m#x1B[39;49;00m
                provider, #x1B[33m"#x1B[39;49;00m#x1B[33mvector_store#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, singleton=#x1B[94mTrue#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )  #x1B[90m# ty: ignore[no-matching-overload]#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            capabilities = vector_store.embedding_capabilities#x1B[90m#x1B[39;49;00m
            mode = (#x1B[90m#x1B[39;49;00m
                #x1B[33m"#x1B[39;49;00m#x1B[33mhybrid#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m ((dense := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33mdense#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)) #x1B[95mand#x1B[39;49;00m (sparse := capabilities.get(#x1B[33m"#x1B[39;49;00m#x1B[33msparse#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)))#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m (#x1B[33m"#x1B[39;49;00m#x1B[33mdense_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m dense #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33msparse_only#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m #x1B[94mif#x1B[39;49;00m sparse #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33munknown#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
        error_message = #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mCritical error: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mtype#x1B[39;49;00m(error).#x1B[91m__name__#x1B[39;49;00m#x1B[33m}#x1B[39;49;00m#x1B[33m: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)#x1B[33m!s}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
&gt;       #x1B[94mreturn#x1B[39;49;00m FindCodeResponseSummary(#x1B[90m#x1B[39;49;00m
            matches=[],#x1B[90m#x1B[39;49;00m
            summary=#x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mSearch failed: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00m#x1B[96mstr#x1B[39;49;00m(error)[:#x1B[94m500#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            query_intent=query_intent,#x1B[90m#x1B[39;49;00m
            total_matches=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            total_results=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            token_count=#x1B[94m0#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            execution_time_ms=execution_time_ms,#x1B[90m#x1B[39;49;00m
            search_strategy=(SearchStrategy.KEYWORD_FALLBACK,),#x1B[90m#x1B[39;49;00m
            languages_found=(),#x1B[90m#x1B[39;49;00m
            status=#x1B[33m"#x1B[39;49;00m#x1B[33merror#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            warnings=[(error_message #x1B[94mif#x1B[39;49;00m #x1B[96mlen#x1B[39;49;00m(error_message) &lt;= #x1B[94m200#x1B[39;49;00m #x1B[94melse#x1B[39;49;00m #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33m{#x1B[39;49;00merror_message[:#x1B[94m200#x1B[39;49;00m]#x1B[33m}#x1B[39;49;00m#x1B[33m...#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)],#x1B[90m#x1B[39;49;00m
            indexing_state=indexing_state,#x1B[90m#x1B[39;49;00m
            index_coverage=index_coverage,#x1B[90m#x1B[39;49;00m
            search_mode=mode,#x1B[90m#x1B[39;49;00m
            metadata={},#x1B[90m#x1B[39;49;00m
        )#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE       pydantic_core._pydantic_core.ValidationError: 1 validation error for FindCodeResponseSummary#x1B[0m
#x1B[1m#x1B[31mE       execution_time_ms#x1B[0m
#x1B[1m#x1B[31mE         Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-98.56653213500977, input_type=float]#x1B[0m
#x1B[1m#x1B[31mE           For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal#x1B[0m

#x1B[1m#x1B[31msrc/codeweaver/agent_api/find_code/response.py#x1B[0m:224: ValidationError

#x1B[33mThe above exception was the direct cause of the following exception:#x1B[0m

initialized_app_state = AppState(initialized=True, settings=CodeWeaverSettings(project_path=PosixPath('/home/knitli/codeweaver'), project_name...re_stack=(), indexer=None, health_service=None, failover_manager=None, startup_time=1764074275.9388099, telemetry=None)

    #x1B[0m#x1B[37m@pytest#x1B[39;49;00m.mark.integration#x1B[90m#x1B[39;49;00m
    #x1B[37m@pytest#x1B[39;49;00m.mark.asyncio#x1B[90m#x1B[39;49;00m
    #x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mtest_search_with_intent_parameter#x1B[39;49;00m(initialized_app_state):#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""T010: Search with explicit intent parameter.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Given: Search query with intent specified#x1B[39;49;00m
    #x1B[33m    When: find_code called with different intents#x1B[39;49;00m
    #x1B[33m    Then: Intent reflected in response#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96magent_api#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mfind_code#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mintent#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m IntentType#x1B[90m#x1B[39;49;00m
        #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mserver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mapp_bindings#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m find_code_tool#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        intents_to_test = [#x1B[90m#x1B[39;49;00m
            IntentType.UNDERSTAND,#x1B[90m#x1B[39;49;00m
            IntentType.IMPLEMENT,#x1B[90m#x1B[39;49;00m
            IntentType.DEBUG,#x1B[90m#x1B[39;49;00m
            IntentType.OPTIMIZE,#x1B[90m#x1B[39;49;00m
            IntentType.TEST,#x1B[90m#x1B[39;49;00m
            IntentType.CONFIGURE,#x1B[90m#x1B[39;49;00m
            IntentType.DOCUMENT,#x1B[90m#x1B[39;49;00m
        ]#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mfor#x1B[39;49;00m intent #x1B[95min#x1B[39;49;00m intents_to_test:#x1B[90m#x1B[39;49;00m
&gt;           response = #x1B[94mawait#x1B[39;49;00m find_code_tool(#x1B[90m#x1B[39;49;00m
                query=#x1B[33m"#x1B[39;49;00m#x1B[33mauthentication logic#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                intent=intent,#x1B[90m#x1B[39;49;00m
                token_limit=#x1B[94m30000#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                focus_languages=#x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                context=#x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m

#x1B[1m#x1B[31mtests/integration/test_search_workflows.py#x1B[0m:326: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

query = 'authentication logic', intent = &lt;IntentType.IMPLEMENT: 'implement'&gt;

    #x1B[0m#x1B[94masync#x1B[39;49;00m #x1B[94mdef#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[92mfind_code_tool#x1B[39;49;00m(#x1B[90m#x1B[39;49;00m
        query: #x1B[96mstr#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        intent: IntentType | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        *,#x1B[90m#x1B[39;49;00m
        token_limit: #x1B[96mint#x1B[39;49;00m = #x1B[94m30000#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        focus_languages: #x1B[96mtuple#x1B[39;49;00m[SemanticSearchLanguage, ...] | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
        context: Context | #x1B[94mNone#x1B[39;49;00m = #x1B[94mNone#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
    ) -&gt; FindCodeResponseSummary:#x1B[90m#x1B[39;49;00m
    #x1B[90m    #x1B[39;49;00m#x1B[33m"""Use CodeWeaver to find code in the codebase.#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Args:#x1B[39;49;00m
    #x1B[33m        query: Natural language search query#x1B[39;49;00m
    #x1B[33m        intent: Optional search intent (if None, will be detected)#x1B[39;49;00m
    #x1B[33m        token_limit: Maximum tokens to return (default: 30000)#x1B[39;49;00m
    #x1B[33m        include_tests: Whether to include test files in results#x1B[39;49;00m
    #x1B[33m        focus_languages: Optional language filter#x1B[39;49;00m
    #x1B[33m        context: MCP context for request tracking#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Returns:#x1B[39;49;00m
    #x1B[33m        FindCodeResponseSummary with ranked matches and metadata#x1B[39;49;00m
    #x1B[33m#x1B[39;49;00m
    #x1B[33m    Raises:#x1B[39;49;00m
    #x1B[33m        QueryError: If search fails unexpectedly#x1B[39;49;00m
    #x1B[33m    """#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
        #x1B[94mtry#x1B[39;49;00m:#x1B[90m#x1B[39;49;00m
            #x1B[90m# Call the real find_code implementation#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[90m# Convert focus_languages from SemanticSearchLanguage to str tuple#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            focus_langs = (#x1B[90m#x1B[39;49;00m
                #x1B[96mtuple#x1B[39;49;00m(lang.value #x1B[94mif#x1B[39;49;00m #x1B[96mhasattr#x1B[39;49;00m(lang, #x1B[33m"#x1B[39;49;00m#x1B[33mvalue#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m) #x1B[94melse#x1B[39;49;00m #x1B[96mstr#x1B[39;49;00m(lang) #x1B[94mfor#x1B[39;49;00m lang #x1B[95min#x1B[39;49;00m focus_languages)#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m focus_languages#x1B[90m#x1B[39;49;00m
                #x1B[94melse#x1B[39;49;00m #x1B[94mNone#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# Set context on failover manager for notifications#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mserver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mserver#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m get_state#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            state = get_state()#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m state.failover_manager #x1B[95mand#x1B[39;49;00m context:#x1B[90m#x1B[39;49;00m
                state.failover_manager.set_context(context)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            response = #x1B[94mawait#x1B[39;49;00m find_code(#x1B[90m#x1B[39;49;00m
                query=query,#x1B[90m#x1B[39;49;00m
                intent=intent,#x1B[90m#x1B[39;49;00m
                token_limit=token_limit,#x1B[90m#x1B[39;49;00m
                focus_languages=focus_langs,#x1B[90m#x1B[39;49;00m
                max_results=#x1B[94m30#x1B[39;49;00m,  #x1B[90m# Default from find_code signature#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            )#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[94mwith#x1B[39;49;00m contextlib.suppress(#x1B[96mRuntimeError#x1B[39;49;00m):#x1B[90m#x1B[39;49;00m
                #x1B[90m# try to get request id from context for logging and stats.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[90m# Context is only available when called via MCP and will raise ValueError otherwise.#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[90m# Track successful request in statistics#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                #x1B[94mif#x1B[39;49;00m (#x1B[90m#x1B[39;49;00m
                    context#x1B[90m#x1B[39;49;00m
                    #x1B[95mand#x1B[39;49;00m #x1B[96mhasattr#x1B[39;49;00m(context, #x1B[33m"#x1B[39;49;00m#x1B[33mrequest_context#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
                    #x1B[95mand#x1B[39;49;00m (request_context := context.request_context)  #x1B[90m# type: ignore#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                ):#x1B[90m#x1B[39;49;00m
                    request_context: RequestContext[ServerSession, Any, Request]#x1B[90m#x1B[39;49;00m
                    request_id = request_context.request_id#x1B[90m#x1B[39;49;00m
                    statistics().add_successful_request(request_id)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# Add failover metadata if failover manager exists#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m state.failover_manager:#x1B[90m#x1B[39;49;00m
                failover_metadata = {#x1B[90m#x1B[39;49;00m
                    #x1B[33m"#x1B[39;49;00m#x1B[33mfailover#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m: {#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33menabled#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m: state.failover_manager.backup_enabled,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mactive#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m: state.failover_manager.is_failover_active,#x1B[90m#x1B[39;49;00m
                        #x1B[33m"#x1B[39;49;00m#x1B[33mactive_store_type#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m: #x1B[33m"#x1B[39;49;00m#x1B[33mbackup#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                        #x1B[94mif#x1B[39;49;00m state.failover_manager.is_failover_active#x1B[90m#x1B[39;49;00m
                        #x1B[94melse#x1B[39;49;00m #x1B[33m"#x1B[39;49;00m#x1B[33mprimary#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                    }#x1B[90m#x1B[39;49;00m
                }#x1B[90m#x1B[39;49;00m
                #x1B[90m# Set metadata on response#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
                response = response.model_copy(update={#x1B[33m"#x1B[39;49;00m#x1B[33mmetadata#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m: failover_metadata})#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
        #x1B[94mexcept#x1B[39;49;00m #x1B[96mException#x1B[39;49;00m #x1B[94mas#x1B[39;49;00m e:#x1B[90m#x1B[39;49;00m
            #x1B[90m# Track failed request#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mif#x1B[39;49;00m context:#x1B[90m#x1B[39;49;00m
                statistics().log_request_from_context(context, successful=#x1B[94mFalse#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# Log the error#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            _logger.exception(#x1B[33m"#x1B[39;49;00m#x1B[33mfind_code failed#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m)#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
            #x1B[90m# Import here to avoid circular dependency#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
            #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96mcodeweaver#x1B[39;49;00m#x1B[04m#x1B[96m.#x1B[39;49;00m#x1B[04m#x1B[96mexceptions#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[94mimport#x1B[39;49;00m QueryError#x1B[90m#x1B[39;49;00m
    #x1B[90m#x1B[39;49;00m
&gt;           #x1B[94mraise#x1B[39;49;00m QueryError(#x1B[90m#x1B[39;49;00m
                #x1B[33mf#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m#x1B[33mUnexpected error in find_code: #x1B[39;49;00m#x1B[33m{#x1B[39;49;00me#x1B[33m!s}#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m,#x1B[90m#x1B[39;49;00m
                suggestions=[#x1B[33m"#x1B[39;49;00m#x1B[33mTry a simpler query#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m, #x1B[33m"#x1B[39;49;00m#x1B[33mCheck server logs for details#x1B[39;49;00m#x1B[33m"#x1B[39;49;00m],#x1B[90m#x1B[39;49;00m
            ) #x1B[94mfrom#x1B[39;49;00m#x1B[90m #x1B[39;49;00m#x1B[04m#x1B[96me#x1B[39;49;00m#x1B[90m#x1B[39;49;00m
#x1B[1m#x1B[31mE           codeweaver.exceptions.QueryError: Unexpected error in find_code: 1 validation error for FindCodeResponseSummary#x1B[0m
#x1B[1m#x1B[31mE           execution_time_ms#x1B[0m
#x1B[1m#x1B[31mE             Input should be greater than or equal to 0 [type=greater_than_equal, input_value=-98.56653213500977, input_type=float]#x1B[0m
#x1B[1m#x1B[31mE               For further information visit https://errors.pydantic.dev/2.12/v/greater_than_equal#x1B[0m
#x1B[1m#x1B[31mE           #x1B[0m
#x1B[1m#x1B[31mE           Encountered error in 'codeweaver.server.app_bindings' at /home/knitli/codeweaver/src/codeweaver/server/app_bindings.py:151#x1B[0m
#x1B[1m#x1B[31mE           #x1B[0m
#x1B[1m#x1B[31mE           CodeWeaver is in alpha. Please report possible bugs at https://github.com/knitli/codeweaver/issues#x1B[0m
#x1B[1m#x1B[31mE           #x1B[0m
#x1B[1m#x1B[31mE           If you're not sure something is a bug, you can open a discussion at: https://github.com/knitli/codeweaver/discussions#x1B[0m
#x1B[1m#x1B[31mE           #x1B[0m
#x1B[1m#x1B[31mE           Thank you for helping us improve CodeWeaver!#x1B[0m

#x1B[1m#x1B[31msrc/codeweaver/server/app_bindings.py#x1B[0m:151: QueryError</failure></testcase><testcase classname="tests.integration.test_search_workflows" name="test_search_filters_work" time="0.888" /><testcase classname="tests.integration.test_search_workflows" name="test_search_token_limit" time="0.484" /><testcase classname="tests.integration.test_search_workflows" name="test_empty_query_handling" time="0.486" /><testcase classname="tests.integration.test_search_workflows" name="test_no_results_scenario" time="0.510" /><testcase classname="tests.integration.test_search_workflows" name="test_search_performance" time="0.516" /><testcase classname="tests.integration.test_search_workflows" name="test_search_response_time_tracking" time="0.477" /><testcase classname="tests.integration.test_search_workflows" name="test_search_strategy_reporting" time="0.181" /><testcase classname="tests.integration.test_search_workflows" name="test_search_languages_found" time="0.480" /><testcase classname="tests.integration.test_server_indexing" name="test_server_starts_without_errors" time="0.070" /><testcase classname="tests.integration.test_server_indexing" name="test_auto_indexing_on_startup" time="14.225" /><testcase classname="tests.integration.test_server_indexing" name="test_indexing_progress_via_health" time="3.773" /><testcase classname="tests.integration.test_server_indexing" name="test_indexing_completes_successfully" time="5.527" /><testcase classname="tests.integration.test_server_indexing" name="test_indexing_error_recovery" time="5.602" /><testcase classname="tests.integration.test_server_indexing" name="test_file_change_indexing" time="5.866" /><testcase classname="tests.integration.test_server_indexing" name="test_indexing_performance" time="4.478" /><testcase classname="tests.integration.test_testpypi_publish" name="test_publish_to_testpypi" time="0.003"><skipped type="pytest.skip" message="Requires GitHub Actions infrastructure - manual validation required">/home/knitli/codeweaver/tests/integration/test_testpypi_publish.py:11: Requires GitHub Actions infrastructure - manual validation required</skipped></testcase><testcase classname="tests.integration.test_version_scenarios" name="test_version_scenarios" time="2.752" /><testcase classname="tests.integration.test_version_scenarios" name="test_version_consistency_across_formats" time="2.481" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_search_latency[1000]" time="2.401" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_search_latency[5000]" time="3.567" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_search_latency[10000]" time="18.476" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_upsert_batch_performance" time="0.463" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_delete_by_file_performance[10]" time="0.963" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_delete_by_file_performance[50]" time="1.098" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_delete_by_file_performance[100]" time="1.289" /><testcase classname="tests.performance.test_vector_store_performance" name="test_memory_persistence_performance[1000]" time="0.854" /><testcase classname="tests.performance.test_vector_store_performance" name="test_memory_persistence_performance[5000]" time="4.095" /><testcase classname="tests.performance.test_vector_store_performance" name="test_memory_persistence_performance[10000]" time="8.069" /><testcase classname="tests.performance.test_vector_store_performance" name="test_qdrant_concurrent_search" time="3.771" /><testcase classname="tests.performance.test_vector_store_performance" name="test_hybrid_search_performance" time="4.178" /><testcase classname="tests.performance.test_vector_store_performance" name="test_performance_regression_check" time="3.215" /><testcase classname="tests.smoke.test_pypi_install" name="test_install_from_pypi" time="0.001"><skipped type="pytest.skip" message="Requires package published to PyPI - run manually after production publish">/home/knitli/codeweaver/tests/smoke/test_pypi_install.py:19: Requires package published to PyPI - run manually after production publish</skipped></testcase><testcase classname="tests.smoke.test_pypi_install" name="test_pypi_metadata" time="0.003"><skipped type="pytest.skip" message="Manual validation required - check PyPI project page">/home/knitli/codeweaver/tests/smoke/test_pypi_install.py:100: Manual validation required - check PyPI project page</skipped></testcase><testcase classname="tests.smoke.test_pypi_install" name="test_pypi_search" time="0.002"><skipped type="pytest.skip" message="Manual validation required - search PyPI">/home/knitli/codeweaver/tests/smoke/test_pypi_install.py:115: Manual validation required - search PyPI</skipped></testcase><testcase classname="tests.smoke.test_testpypi_install" name="test_install_from_testpypi" time="0.000"><skipped type="pytest.skip" message="Requires package published to TestPyPI - run manually after publish">/home/knitli/codeweaver/tests/smoke/test_testpypi_install.py:19: Requires package published to TestPyPI - run manually after publish</skipped></testcase><testcase classname="tests.smoke.test_testpypi_install" name="test_testpypi_metadata" time="0.002"><skipped type="pytest.skip" message="Manual validation required - check TestPyPI project page">/home/knitli/codeweaver/tests/smoke/test_testpypi_install.py:104: Manual validation required - check TestPyPI project page</skipped></testcase><testcase classname="tests.unit.cli.test_config_command.TestConfigShow" name="test_show_displays_config" time="0.140" /><testcase classname="tests.unit.cli.test_config_command.TestConfigShow" name="test_show_handles_missing_config" time="0.073" /><testcase classname="tests.unit.cli.test_config_command.TestConfigShow" name="test_show_respects_env_vars" time="0.088" /><testcase classname="tests.unit.cli.test_config_command.TestConfigValidation" name="test_invalid_provider_rejected" time="0.001"><skipped type="pytest.skip" message="Provider validation not yet implemented in settings">/home/knitli/codeweaver/tests/unit/cli/test_config_command.py:92: Provider validation not yet implemented in settings</skipped></testcase><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorUnsetHandling" name="test_project_path_auto_detection" time="0.056" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorUnsetHandling" name="test_unset_vs_none_distinction" time="0.008" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorUnsetHandling" name="test_doctor_handles_auto_detected_settings" time="0.001"><skipped type="pytest.skip" message="Doctor command may fail if no providers configured - test needs provider setup">/home/knitli/codeweaver/tests/unit/cli/test_doctor_command.py:60: Doctor command may fail if no providers configured - test needs provider setup</skipped></testcase><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorUnsetHandling" name="test_unset_check_pattern_correct" time="0.007" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorImports" name="test_import_paths_correct" time="0.004" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorImports" name="test_import_from_common_utils_succeeds" time="0.005" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorProviderEnvVars" name="test_provider_env_vars_used" time="0.006" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorProviderEnvVars" name="test_all_cloud_providers_have_env_vars" time="0.007" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorQdrantDetection" name="test_qdrant_cloud_detection" time="0.007" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorQdrantDetection" name="test_qdrant_docker_detection" time="0.006" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorQdrantDetection" name="test_qdrant_deployment_types" time="0.006" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorConnectionTests" name="test_connection_tests_implemented" time="0.007" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorConnectionTests" name="test_connection_test_flag_recognized" time="0.053" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorConfigAssumptions" name="test_config_file_not_required" time="0.001"><skipped type="pytest.skip" message="Settings structure changed">/home/knitli/codeweaver/tests/unit/cli/test_doctor_command.py:244: Settings structure changed</skipped></testcase><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorConfigAssumptions" name="test_env_only_setup_valid" time="0.001"><skipped type="pytest.skip" message="Settings structure changed">/home/knitli/codeweaver/tests/unit/cli/test_doctor_command.py:265: Settings structure changed</skipped></testcase><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorConfigAssumptions" name="test_config_sources_hierarchy" time="0.000"><skipped type="pytest.skip" message="Settings structure changed">/home/knitli/codeweaver/tests/unit/cli/test_doctor_command.py:282: Settings structure changed</skipped></testcase><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorDependencyChecks" name="test_uses_find_spec_not_version" time="0.005" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorDependencyChecks" name="test_optional_dependencies_detected" time="0.005" /><testcase classname="tests.unit.cli.test_doctor_command.TestDoctorDependencyChecks" name="test_core_dependencies_available" time="0.004" /><testcase classname="tests.unit.cli.test_httpx_lazy_import.TestHttpxLazyImport" name="test_status_command_lazy_import" time="0.004" /><testcase classname="tests.unit.cli.test_httpx_lazy_import.TestHttpxLazyImport" name="test_doctor_command_lazy_import" time="0.006" /><testcase classname="tests.unit.cli.test_httpx_lazy_import.TestHttpxLazyImport" name="test_index_and_init_external_dependency_note" time="0.009" /><testcase classname="tests.unit.cli.test_httpx_lazy_import.TestHttpxLazyImport" name="test_status_command_imports_httpx_when_called" time="0.008" /><testcase classname="tests.unit.cli.test_httpx_lazy_import.TestHttpxLazyImport" name="test_index_command_imports_httpx_when_called" time="0.056" /><testcase classname="tests.unit.cli.test_init_command.TestInitConfigCommand" name="test_config_profile_recommended" time="0.114" /><testcase classname="tests.unit.cli.test_init_command.TestInitConfigCommand" name="test_config_profile_quickstart" time="0.116" /><testcase classname="tests.unit.cli.test_init_command.TestInitConfigCommand" name="test_config_quickstart_flag" time="0.109" /><testcase classname="tests.unit.cli.test_init_command.TestInitCommand" name="test_init_creates_both_configs" time="0.139" /><testcase classname="tests.unit.cli.test_init_command.TestInitCommand" name="test_config_only_flag" time="0.123" /><testcase classname="tests.unit.cli.test_init_command.TestInitCommand" name="test_mcp_only_flag" time="0.034" /><testcase classname="tests.unit.cli.test_init_command.TestHttpStreamingArchitecture" name="test_mcp_config_uses_http_transport" time="0.080" /><testcase classname="tests.unit.cli.test_init_command.TestHttpStreamingArchitecture" name="test_http_streaming_command_structure" time="0.080" /><testcase classname="tests.unit.cli.test_init_command.TestHttpStreamingArchitecture" name="test_stdio_not_used" time="0.077" /><testcase classname="tests.unit.cli.test_init_command.TestMcpClientSupport" name="test_supported_clients" time="0.006" /><testcase classname="tests.unit.cli.test_init_command.TestMcpClientSupport" name="test_client_config_paths_correct" time="0.006" /><testcase classname="tests.unit.cli.test_init_command.TestInitIntegration" name="test_init_integrates_with_config" time="0.157" /><testcase classname="tests.unit.cli.test_init_command.TestInitIntegration" name="test_init_respects_existing_config" time="0.152" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_stdio_config_basic" time="0.006" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_stdio_config_with_custom_args" time="0.006" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_stdio_config_with_env" time="0.004" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_stdio_config_with_timeout" time="0.004" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_remote_config_basic" time="0.005" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_remote_config_with_custom_host_port" time="0.005" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_create_remote_config_with_timeout" time="0.008" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_handle_output_print_mode" time="0.010" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_handle_output_write_mode" time="0.009" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_handle_write_output_creates_parent_dirs" time="0.009" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_handle_write_output_backs_up_existing" time="0.001"><skipped type="pytest.skip" message="Backup functionality exists but test needs updating for actual backup behavior">/home/knitli/codeweaver/tests/unit/cli/test_init_command.py:509: Backup functionality exists but test needs updating for actual backup behavior</skipped></testcase><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_mcp_command_stdio_transport" time="0.033" /><testcase classname="tests.unit.cli.test_init_command.TestHelperFunctions" name="test_mcp_command_http_transport" time="0.028" /><testcase classname="tests.unit.cli.test_list_command.TestListProviders" name="test_list_providers_uses_registry" time="0.036" /><testcase classname="tests.unit.cli.test_list_command.TestListProviders" name="test_list_shows_all_providers" time="0.043" /><testcase classname="tests.unit.cli.test_list_command.TestListProviders" name="test_list_providers_by_kind" time="0.039" /><testcase classname="tests.unit.cli.test_list_command.TestListProviders" name="test_list_providers_shows_availability" time="0.035" /><testcase classname="tests.unit.cli.test_list_command.TestListModels" name="test_list_models_for_provider" time="0.015" /><testcase classname="tests.unit.cli.test_list_command.TestListModels" name="test_list_sparse_embedding_models" time="0.037" /><testcase classname="tests.unit.cli.test_list_command.TestListModels" name="test_list_models_includes_all_kinds" time="0.047" /><testcase classname="tests.unit.cli.test_list_command.TestListModels" name="test_list_models_shows_dimensions" time="0.014" /><testcase classname="tests.unit.cli.test_list_command.TestListCoverage" name="test_list_embedding_providers_coverage" time="0.050" /><testcase classname="tests.unit.cli.test_list_command.TestListCoverage" name="test_list_reranking_providers_coverage" time="0.027" /><testcase classname="tests.unit.cli.test_list_command.TestListCoverage" name="test_list_sparse_providers_coverage" time="0.019" /><testcase classname="tests.unit.cli.test_list_command.TestListModelRegistry" name="test_uses_model_registry" time="0.001"><skipped type="pytest.skip" message="Test needs access to internal model registry API which may not be public">/home/knitli/codeweaver/tests/unit/cli/test_list_command.py:215: Test needs access to internal model registry API which may not be public</skipped></testcase><testcase classname="tests.unit.cli.test_list_command.TestListModelRegistry" name="test_model_registry_has_sparse_models" time="0.001"><skipped type="pytest.skip" message="Test needs access to internal model registry API which may not be public">/home/knitli/codeweaver/tests/unit/cli/test_list_command.py:222: Test needs access to internal model registry API which may not be public</skipped></testcase><testcase classname="tests.unit.cli.test_list_command.TestListOutput" name="test_list_providers_table_format" time="0.035" /><testcase classname="tests.unit.cli.test_list_command.TestListOutput" name="test_list_models_detailed_info" time="0.022" /><testcase classname="tests.unit.cli.test_list_command.TestListOutput" name="test_list_handles_no_results" time="0.051" /><testcase classname="tests.unit.common.utils.test_git.TestHasGit" name="test_git_installed_and_working" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestHasGit" name="test_git_not_installed" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestHasGit" name="test_git_command_fails" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestHasGit" name="test_git_exists_but_not_executable" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_normal_git_repository" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_git_worktree" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_non_git_directory" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_no_dot_git" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_broken_symlink" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestIsGitDir" name="test_defaults_to_cwd" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestTryGitRevParse" name="test_no_git_installed" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestTryGitRevParse" name="test_in_superproject" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestTryGitRevParse" name="test_normal_repository" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestTryGitRevParse" name="test_not_in_git_repo" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestWalkUpToGitRoot" name="test_finds_git_root" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestWalkUpToGitRoot" name="test_file_path_uses_parent" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestWalkUpToGitRoot" name="test_raises_when_no_git_found" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestWalkUpToGitRoot" name="test_uses_cwd_as_default" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestRootPathChecksOut" name="test_valid_git_directory" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestRootPathChecksOut" name="test_non_directory" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestRootPathChecksOut" name="test_directory_without_git" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetProjectPath" name="test_with_valid_root_path" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestGetProjectPath" name="test_uses_git_rev_parse" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetProjectPath" name="test_walks_up_when_git_rev_parse_fails" time="0.009" /><testcase classname="tests.unit.common.utils.test_git.TestGetProjectPath" name="test_invalid_root_path_walks_up" time="0.009" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_none_returns_none" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_relative_path_unchanged" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_absolute_path_inside_project" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_absolute_path_outside_project" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_not_in_git_repo" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestSetRelativePath" name="test_string_path_conversion" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitDir" name="test_valid_git_directory" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitDir" name="test_non_git_directory_finds_project" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitDir" name="test_returns_missing_when_not_found" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitRevision" name="test_returns_short_sha" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitRevision" name="test_returns_missing_when_no_git" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitRevision" name="test_returns_missing_for_non_git_dir" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitRevision" name="test_git_command_fails" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestGetBranchFromOrigin" name="test_simple_branch_name" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestGetBranchFromOrigin" name="test_complex_branch_name" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestGetBranchFromOrigin" name="test_no_git_installed" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestGetBranchFromOrigin" name="test_git_command_fails" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_normal_branch" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_detached_head_with_origin" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_detached_head_no_origin" time="0.007" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_no_git_installed" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_not_in_git_repo" time="0.008" /><testcase classname="tests.unit.common.utils.test_git.TestGetGitBranch" name="test_git_command_fails" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestInCodeweaverClone" name="test_path_contains_codeweaver" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestInCodeweaverClone" name="test_path_contains_code_weaver" time="0.006" /><testcase classname="tests.unit.common.utils.test_git.TestInCodeweaverClone" name="test_case_insensitive" time="0.004" /><testcase classname="tests.unit.common.utils.test_git.TestInCodeweaverClone" name="test_git_root_contains_codeweaver" time="0.009" /><testcase classname="tests.unit.common.utils.test_git.TestInCodeweaverClone" name="test_unrelated_repository" time="0.005" /><testcase classname="tests.unit.common.utils.test_git.TestGitUtilsIntegration" name="test_real_git_repo_workflow" time="0.157" /><testcase classname="tests.unit.common.utils.test_git.TestGitUtilsIntegration" name="test_nested_directory_navigation" time="0.009" /><testcase classname="tests.unit.common.utils.test_git.TestGitUtilsIntegration" name="test_worktree_detection" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportBasics" name="test_lazy_import_module" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportBasics" name="test_lazy_import_function" time="0.003" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportBasics" name="test_lazy_import_class" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportBasics" name="test_lazy_import_nested_attributes" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportBasics" name="test_lazy_import_chaining" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportErrors" name="test_module_not_found" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportErrors" name="test_attribute_not_found" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportErrors" name="test_nested_attribute_not_found" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportErrors" name="test_not_callable_error" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportCaching" name="test_resolution_caching" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportCaching" name="test_multiple_calls_same_resolution" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportThreadSafety" name="test_concurrent_resolution" time="0.008" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportRealWorldUseCases" name="test_settings_pattern" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportRealWorldUseCases" name="test_type_checking_runtime_pattern" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportRealWorldUseCases" name="test_global_level_lazy_imports" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportMagicMethods" name="test_repr" time="0.003" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportMagicMethods" name="test_dir" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportMagicMethods" name="test_setattr" time="0.003" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportComparison" name="test_old_vs_new_syntax" time="0.003" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportComparison" name="test_chaining_impossible_with_old_pattern" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestEdgeCases" name="test_empty_attribute_chain" time="0.003" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestEdgeCases" name="test_single_attribute" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestEdgeCases" name="test_multiple_attribute_chains" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestEdgeCases" name="test_lazy_import_with_existing_import" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestEdgeCases" name="test_multiple_lazy_imports_same_module" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestDocumentationExamples" name="test_basic_module_import_example" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestDocumentationExamples" name="test_function_import_example" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestDocumentationExamples" name="test_attribute_chaining_example" time="0.006" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportPerformance" name="test_resolution_overhead" time="0.012" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportPerformance" name="test_cached_resolution_performance" time="0.035" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportIntrospection" name="test_inspect_signature_compatibility" time="0.004" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportIntrospection" name="test_pydantic_default_factory_compatibility" time="0.052" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportIntrospection" name="test_introspection_attributes_resolve" time="0.005" /><testcase classname="tests.unit.common.utils.test_lazy_importer.TestLazyImportIntrospection" name="test_introspection_attributes_missing" time="0.004" /><testcase classname="tests.unit.core.test_chunk_batch_keys" name="test_set_batch_keys_returns_new_instance" time="0.006" /><testcase classname="tests.unit.core.test_chunk_batch_keys" name="test_set_batch_keys_preserves_metadata" time="0.007" /><testcase classname="tests.unit.core.test_chunk_batch_keys" name="test_set_batch_keys_does_not_duplicate" time="0.006" /><testcase classname="tests.unit.core.test_chunk_batch_keys" name="test_set_batch_keys_allows_multiple_batches" time="0.007" /><testcase classname="tests.unit.core.test_chunk_batch_keys" name="test_metadata_isolation_after_set_batch_keys" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_basic.TestDelimiterChunksJavaScriptNested" name="test_delimiter_chunks_javascript_nested" time="0.104" /><testcase classname="tests.unit.engine.chunker.test_delimiter_basic.TestDelimiterPriorityResolution" name="test_delimiter_priority_resolution" time="0.063" /><testcase classname="tests.unit.engine.chunker.test_delimiter_basic.TestDelimiterChunksPython" name="test_delimiter_chunks_python" time="0.097" /><testcase classname="tests.unit.engine.chunker.test_delimiter_basic.TestDelimiterNestingHandling" name="test_nested_control_structures" time="0.066" /><testcase classname="tests.unit.engine.chunker.test_delimiter_basic.TestDelimiterBoundaryDetection" name="test_start_end_marker_accuracy" time="0.078" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestGenericFallback" name="test_no_delimiters_match_uses_generic" time="0.093" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestDelimiterBehavior" name="test_inclusive_vs_exclusive_delimiters" time="0.097" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestLineExpansion" name="test_take_whole_lines_expansion" time="0.066" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestUnusualPatterns" name="test_nested_delimiter_structures" time="0.101" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestUnusualPatterns" name="test_overlapping_delimiter_resolution" time="0.068" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestEdgeCaseContent" name="test_empty_delimiter_blocks" time="0.081" /><testcase classname="tests.unit.engine.chunker.test_delimiter_edge_cases.TestEdgeCaseContent" name="test_unmatched_delimiters" time="0.075" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_pattern_creation" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_pattern_with_overrides" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_expand_simple_pattern" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_expand_any_end_pattern" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_expand_uses_kind_defaults" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_expand_uses_overrides" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestDelimiterPattern" name="test_expand_multiplatform_line_endings" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternMatching" name="test_matches_pattern_exact" time="0.003" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternMatching" name="test_matches_pattern_case_insensitive" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternMatching" name="test_matches_pattern_any_end" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternMatching" name="test_matches_pattern_specific_ends" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternMatching" name="test_matches_pattern_no_match" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_kind_exists" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_priority" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_priority_ordering" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_pattern_definition" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_cross_platform" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestParagraphDelimiter" name="test_paragraph_expansion" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_c_style_detection" time="0.007" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_python_style_detection" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_lisp_style_detection" time="0.007" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_markup_style_detection" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_shell_style_detection" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_unknown_detection" time="0.007" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_min_confidence_threshold" time="0.008" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestLanguageFamilies" name="test_detect_characteristics" time="0.007" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestCorePatterns" name="test_function_pattern" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestCorePatterns" name="test_conditional_pattern" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestCorePatterns" name="test_comment_patterns_cross_platform" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestCorePatterns" name="test_string_patterns_comprehensive" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestCorePatterns" name="test_all_patterns_collection" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternInference" name="test_infer_function_delimiter" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternInference" name="test_infer_unknown_delimiter" time="0.007" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestPatternInference" name="test_pattern_coverage" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestIntegration" name="test_pattern_to_delimiter_roundtrip" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestIntegration" name="test_family_pattern_expansion" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_delimiter_patterns.TestIntegration" name="test_unknown_language_fallback" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_governance" name="test_timeout_enforcement" time="1.199" /><testcase classname="tests.unit.engine.chunker.test_governance" name="test_chunk_limit_enforcement" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_governance" name="test_governor_context_manager_success" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_governance" name="test_governor_context_manager_error" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_governance" name="test_register_chunk_increments_and_checks" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_selector" name="test_selector_chooses_semantic_for_python" time="0.009" /><testcase classname="tests.unit.engine.chunker.test_selector" name="test_selector_falls_back_to_delimiter_for_unknown" time="0.013" /><testcase classname="tests.unit.engine.chunker.test_selector" name="test_selector_creates_fresh_instances" time="0.008" /><testcase classname="tests.unit.engine.chunker.test_semantic_basic" name="test_semantic_chunks_python_file" time="0.087" /><testcase classname="tests.unit.engine.chunker.test_semantic_basic" name="test_semantic_chunks_javascript_file" time="0.208" /><testcase classname="tests.unit.engine.chunker.test_semantic_basic" name="test_semantic_chunks_rust_file" time="0.207" /><testcase classname="tests.unit.engine.chunker.test_semantic_dedup" name="test_duplicate_functions_deduplicated" time="0.080" /><testcase classname="tests.unit.engine.chunker.test_semantic_dedup" name="test_unique_chunks_preserved" time="0.078" /><testcase classname="tests.unit.engine.chunker.test_semantic_dedup" name="test_batch_id_tracking" time="0.086" /><testcase classname="tests.unit.engine.chunker.test_semantic_edge_cases" name="test_empty_file" time="0.036" /><testcase classname="tests.unit.engine.chunker.test_semantic_edge_cases" name="test_whitespace_only_file" time="0.036" /><testcase classname="tests.unit.engine.chunker.test_semantic_edge_cases" name="test_single_line_file" time="0.036" /><testcase classname="tests.unit.engine.chunker.test_semantic_edge_cases" name="test_binary_file_detection" time="0.035" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestParseErrors" name="test_parse_error_raises" time="0.051" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestParseErrors" name="test_parse_error_suggestions_present" time="0.047" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestASTDepthErrors" name="test_ast_depth_exceeded_error" time="4.417" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestASTDepthErrors" name="test_ast_depth_error_message_descriptive" time="4.375" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestTimeoutErrors" name="test_timeout_exceeded" time="0.064" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestTimeoutErrors" name="test_timeout_error_suggestions_present" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestChunkLimitErrors" name="test_chunk_limit_exceeded" time="0.083" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestChunkLimitErrors" name="test_chunk_limit_error_overflow_metrics" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestChunkLimitErrors" name="test_chunk_limit_error_suggestions_present" time="0.005" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestErrorMessageQuality" name="test_all_error_types_have_descriptive_messages" time="0.006" /><testcase classname="tests.unit.engine.chunker.test_semantic_errors.TestErrorMessageQuality" name="test_error_details_are_structured" time="0.004" /><testcase classname="tests.unit.engine.chunker.test_semantic_oversized" name="test_oversized_file_chunks_via_child_nodes" time="2.329" /><testcase classname="tests.unit.engine.chunker.test_semantic_oversized" name="test_oversized_class_chunks_via_methods" time="1.157" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncPeriodically" name="test_sync_task_starts_on_initialize" time="0.149" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncPeriodically" name="test_sync_skipped_when_no_primary" time="0.018"><skipped type="pytest.skip" message="Timing-dependent test - integration test instead">/home/knitli/codeweaver/tests/unit/engine/test_failover.py:118: Timing-dependent test - integration test instead</skipped></testcase><testcase classname="tests.unit.engine.test_failover.TestBackupSyncPeriodically" name="test_sync_skipped_during_failover" time="0.010"><skipped type="pytest.skip" message="Timing-dependent test - integration test instead">/home/knitli/codeweaver/tests/unit/engine/test_failover.py:124: Timing-dependent test - integration test instead</skipped></testcase><testcase classname="tests.unit.engine.test_failover.TestBackupSyncPeriodically" name="test_sync_skipped_when_primary_unhealthy" time="0.025"><skipped type="pytest.skip" message="Timing-dependent test - integration test instead">/home/knitli/codeweaver/tests/unit/engine/test_failover.py:130: Timing-dependent test - integration test instead</skipped></testcase><testcase classname="tests.unit.engine.test_failover.TestBackupSyncPeriodically" name="test_sync_executes_when_conditions_met" time="0.009"><skipped type="pytest.skip" message="Timing-dependent test - integration test instead">/home/knitli/codeweaver/tests/unit/engine/test_failover.py:136: Timing-dependent test - integration test instead</skipped></testcase><testcase classname="tests.unit.engine.test_failover.TestSyncPrimaryToBackup" name="test_creates_backup_file" time="0.075" /><testcase classname="tests.unit.engine.test_failover.TestSyncPrimaryToBackup" name="test_atomic_write_with_temp_file" time="0.039" /><testcase classname="tests.unit.engine.test_failover.TestSyncPrimaryToBackup" name="test_handles_pagination" time="0.073" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_missing_file" time="0.032" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_invalid_json" time="0.029" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_missing_required_fields" time="0.028" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_unsupported_version" time="0.027" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_valid_v1_file" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestValidateBackupFile" name="test_validates_valid_v2_file" time="0.028" /><testcase classname="tests.unit.engine.test_failover.TestFailoverWithValidation" name="test_failover_validates_before_restore" time="0.165" /><testcase classname="tests.unit.engine.test_failover.TestFailoverWithValidation" name="test_failover_restores_valid_backup" time="0.159" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_snapshot_backup_state" time="0.029" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_sync_back_identifies_new_chunks" time="0.032" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_sync_chunk_reembeds_text" time="0.034" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_verify_primary_health_checks" time="0.034" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_verify_primary_health_fails_on_open_circuit" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_restore_to_primary_with_sync_back" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestSyncBackToPrimary" name="test_restore_stays_in_backup_on_sync_failure" time="0.033" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_should_sync_false_when_no_tracker" time="0.029" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_should_sync_false_when_no_changes" time="0.072" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_should_sync_true_on_volume_threshold" time="0.072" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_should_sync_true_on_time_threshold" time="0.078" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_should_sync_true_when_never_synced" time="0.079" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_sync_pending_returns_zero_without_tracker" time="0.030" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_sync_pending_returns_zero_without_indexer" time="0.077" /><testcase classname="tests.unit.engine.test_failover.TestBackupSyncCoordination" name="test_sync_pending_returns_zero_with_no_changes" time="0.076" /><testcase classname="tests.unit.engine.test_failover.TestBackupIndexerCreation" name="test_backup_indexer_property" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestBackupIndexerCreation" name="test_backup_indexer_property_none" time="0.036" /><testcase classname="tests.unit.engine.test_failover.TestPrimaryRecovery" name="test_sync_failover_returns_zero_without_tracker" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestPrimaryRecovery" name="test_sync_failover_returns_zero_without_indexer" time="0.078" /><testcase classname="tests.unit.engine.test_failover.TestPrimaryRecovery" name="test_sync_failover_returns_zero_with_no_failover_files" time="0.074" /><testcase classname="tests.unit.engine.test_failover.TestPrimaryRecovery" name="test_status_includes_change_tracker_info" time="0.075" /><testcase classname="tests.unit.engine.test_failover.TestGetStatus" name="test_status_includes_backup_sync_time" time="0.031" /><testcase classname="tests.unit.engine.test_failover.TestGetStatus" name="test_status_includes_backup_file_info" time="0.034" /><testcase classname="tests.unit.engine.test_failover.TestGetStatus" name="test_status_no_backup_file" time="0.027" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_init_creates_empty_tracker" time="0.060" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_pending_count_sums_changes_and_deletions" time="0.051" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_has_pending_changes_true_when_changes" time="0.050" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_has_pending_changes_true_when_deletions" time="0.048" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_has_pending_changes_false_when_empty" time="0.055" /><testcase classname="tests.unit.engine.test_failover_tracker.TestFileChangeTrackerBasics" name="test_has_failover_files" time="0.052" /><testcase classname="tests.unit.engine.test_failover_tracker.TestRecordFileIndexed" name="test_records_new_file" time="0.063" /><testcase classname="tests.unit.engine.test_failover_tracker.TestRecordFileIndexed" name="test_records_modified_file" time="0.049" /><testcase classname="tests.unit.engine.test_failover_tracker.TestRecordFileIndexed" name="test_skips_unchanged_file" time="0.048" /><testcase classname="tests.unit.engine.test_failover_tracker.TestRecordFileDeleted" name="test_records_deletion" time="0.051" /><testcase classname="tests.unit.engine.test_failover_tracker.TestRecordFailoverIndexed" name="test_records_failover_indexed" time="0.054" /><testcase classname="tests.unit.engine.test_failover_tracker.TestGetFilesNeedingBackup" name="test_returns_absolute_paths" time="0.049" /><testcase classname="tests.unit.engine.test_failover_tracker.TestGetFilesNeedingBackup" name="test_returns_empty_without_project_path" time="0.062" /><testcase classname="tests.unit.engine.test_failover_tracker.TestMarkComplete" name="test_mark_backup_complete" time="0.051" /><testcase classname="tests.unit.engine.test_failover_tracker.TestMarkComplete" name="test_mark_primary_recovery_complete" time="0.053" /><testcase classname="tests.unit.engine.test_failover_tracker.TestTimeSinceLastSync" name="test_returns_none_when_never_synced" time="0.059" /><testcase classname="tests.unit.engine.test_failover_tracker.TestTimeSinceLastSync" name="test_returns_seconds_since_sync" time="0.049" /><testcase classname="tests.unit.engine.test_failover_tracker.TestPersistence" name="test_save_creates_file" time="0.057" /><testcase classname="tests.unit.engine.test_failover_tracker.TestPersistence" name="test_save_skips_when_not_dirty" time="0.050" /><testcase classname="tests.unit.engine.test_failover_tracker.TestPersistence" name="test_load_creates_new_when_not_found" time="0.059" /><testcase classname="tests.unit.engine.test_failover_tracker.TestPersistence" name="test_load_restores_state" time="0.067" /><testcase classname="tests.unit.engine.test_failover_tracker.TestPersistence" name="test_load_handles_corrupt_file" time="0.054" /><testcase classname="tests.unit.engine.test_failover_tracker.TestGetStatus" name="test_returns_complete_status" time="0.052" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_estimates_from_stats_with_chunks" time="0.005" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_estimates_from_stats_with_files" time="0.005" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_estimates_from_project_path[filenames0]" time="0.006" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_yellow_zone_for_large_projects" time="0.005" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_red_zone_for_very_large_projects" time="0.007" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_safety_check_with_sufficient_memory" time="0.006" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_safety_check_with_insufficient_memory" time="0.006" /><testcase classname="tests.unit.engine.test_resource_estimation.TestEstimateBackupMemoryRequirements" name="test_fallback_when_psutil_not_available" time="0.135" /><testcase classname="tests.unit.engine.test_resource_estimation.TestMemoryEstimate" name="test_gb_properties" time="0.005" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_initialization_with_env_api_key" time="0.037" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_initialization_without_api_key_raises_error" time="0.009" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_initialization_with_client" time="0.006" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_initialization_with_custom_kwargs" time="0.013" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_base_url_cohere" time="0.017" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderInitialization" name="test_provider_initialization_azure_provider" time="0.016" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderEmbedding" name="test_embed_documents_success" time="0.055" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderEmbedding" name="test_embed_query_success" time="0.010" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderEmbedding" name="test_embed_documents_v4_model" time="0.029" /><testcase classname="tests.unit.providers.embedding.test_cohere.TestCohereEmbeddingProviderErrorHandling" name="test_embed_documents_handles_connection_error" time="7.095" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderInitialization" name="test_provider_initialization_with_client" time="0.014" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderInitialization" name="test_provider_initialization_with_context_model" time="0.008" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderInitialization" name="test_provider_sets_doc_and_query_kwargs" time="0.009" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderInitialization" name="test_provider_initialization_with_custom_kwargs" time="0.007" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderInitialization" name="test_provider_base_url" time="0.008" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderEmbedding" name="test_embed_documents_success" time="0.045" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderEmbedding" name="test_embed_query_success" time="0.010" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderEmbedding" name="test_embed_query_with_multiple_queries" time="0.010" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderEmbedding" name="test_context_model_uses_correct_transformer" time="0.043" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderErrorHandling" name="test_embed_documents_handles_connection_error" time="7.114" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderErrorHandling" name="test_embed_query_handles_timeout_error" time="7.100" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderDimension" name="test_dimension_property_returns_correct_value" time="0.010" /><testcase classname="tests.unit.providers.embedding.test_voyage.TestVoyageEmbeddingProviderDimension" name="test_dimension_property_with_custom_dimension" time="0.016" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderInitialization" name="test_provider_initialization_with_env_api_key" time="0.065" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderInitialization" name="test_provider_initialization_without_api_key_raises_error" time="0.017" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderInitialization" name="test_provider_initialization_with_client" time="0.014" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderInitialization" name="test_provider_initialization_with_top_n" time="0.016" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderInitialization" name="test_provider_base_url" time="0.009" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderReranking" name="test_execute_rerank_success" time="0.011" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderReranking" name="test_rerank_with_code_chunks" time="0.058" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderReranking" name="test_rerank_with_single_chunk" time="0.037" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderErrorHandling" name="test_rerank_handles_connection_error" time="7.125" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderErrorHandling" name="test_rerank_handles_timeout_error" time="7.089" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderProperties" name="test_provider_property" time="0.009" /><testcase classname="tests.unit.providers.reranking.test_cohere.TestCohereRerankingProviderProperties" name="test_model_name_property" time="0.007" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderInitialization" name="test_provider_initialization_with_client" time="0.013" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderInitialization" name="test_provider_initialization_sets_output_transformer" time="0.008" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderInitialization" name="test_provider_initialization_with_top_n" time="0.008" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderInitialization" name="test_provider_initialization_default_top_n" time="0.007" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderInitialization" name="test_provider_prompt_not_supported" time="0.008" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderReranking" name="test_execute_rerank_success" time="0.010" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderReranking" name="test_rerank_with_code_chunks" time="0.043" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderReranking" name="test_rerank_with_strings" time="0.028" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderReranking" name="test_rerank_limits_results_to_top_n" time="0.142" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderErrorHandling" name="test_execute_rerank_handles_provider_error" time="0.008" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderErrorHandling" name="test_rerank_handles_connection_error" time="0.037" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderErrorHandling" name="test_rerank_handles_timeout_error" time="0.029" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderProperties" name="test_provider_property" time="0.006" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderProperties" name="test_model_name_property" time="0.007" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderProperties" name="test_model_capabilities_property" time="0.006" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderCircuitBreaker" name="test_circuit_breaker_opens_after_failures" time="0.035" /><testcase classname="tests.unit.providers.reranking.test_voyage.TestVoyageRerankingProviderCircuitBreaker" name="test_circuit_breaker_initial_state" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_posthog_client_handles_import_error" time="0.009" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_posthog_client_respects_disabled_setting" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_from_settings_respects_disable_telemetry" time="0.011" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_from_settings_with_no_api_key" time="0.017" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_shutdown_with_no_client" time="0.007" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_shutdown_with_client_error" time="0.008" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_capture_never_raises" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_capture_with_serialization" time="0.010" /><testcase classname="tests.unit.server.test_telemetry_integration.TestTelemetryIntegration" name="test_capture_from_event" time="0.012" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSessionEvent" name="test_session_event_creation" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSessionEvent" name="test_session_event_to_posthog_event" time="0.008" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSessionEvent" name="test_session_event_empty_stats" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSearchEvent" name="test_search_event_creation" time="0.004" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSearchEvent" name="test_search_event_to_posthog_event" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSearchEvent" name="test_search_event_with_tools_over_privacy" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestSearchEvent" name="test_search_event_without_tools_over_privacy" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestContextManagement" name="test_start_session" time="0.004" /><testcase classname="tests.unit.server.test_telemetry_integration.TestContextManagement" name="test_end_session" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestContextManagement" name="test_context_manager" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestContextManagement" name="test_feature_flag_returns_none_when_disabled" time="0.004" /><testcase classname="tests.unit.server.test_telemetry_integration.TestContextManagement" name="test_get_all_feature_flags_returns_empty_when_disabled" time="0.005" /><testcase classname="tests.unit.server.test_telemetry_integration.TestConvenienceFunctions" name="test_capture_session_event_respects_opt_out" time="0.006" /><testcase classname="tests.unit.server.test_telemetry_integration.TestConvenienceFunctions" name="test_capture_search_event_respects_opt_out" time="0.009" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_filters_forbidden_keys" time="0.010" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_converts_to_boolean" time="0.006" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_counts_items" time="0.005" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_hashes_values" time="0.013" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_distribution" time="0.007" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestBasedModelPrivacySerialization" name="test_basedmodel_no_telemetry_keys" time="0.007" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestDataclassPrivacySerialization" name="test_dataclass_filters_forbidden_keys" time="0.012" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestDataclassPrivacySerialization" name="test_dataclass_counts_items" time="0.009" /><testcase classname="tests.unit.telemetry.test_privacy_serialization.TestTelemetryHandlerOverride" name="test_telemetry_handler_override" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestClientMapLookup" name="test_unknown_provider_returns_none" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestClientMapLookup" name="test_provider_without_matching_kind_returns_none" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestClientMapLookup" name="test_pydantic_ai_provider_returns_none" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestClientMapLookup" name="test_provider_without_client_returns_none" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestClientMapLookup" name="test_lazy_import_resolution_error_raises" time="0.008" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_bedrock_creates_boto3_client" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_bedrock_default_region" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_google_uses_api_key" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_google_fallback_to_env_var" time="0.008" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_qdrant_memory_mode" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_qdrant_url_mode" time="0.004" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_qdrant_path_mode" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_local_model_with_model_name" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_local_model_without_model_name" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_api_key_from_provider_settings" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_api_key_from_env_var" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_missing_required_api_key_raises" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestInstantiateClient" name="test_api_key_and_base_url" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestClientOptionsHandling" name="test_client_options_passed_to_instantiate" time="0.006" /><testcase classname="tests.unit.test_client_factory.TestClientOptionsHandling" name="test_empty_client_options" time="0.005" /><testcase classname="tests.unit.test_client_factory.TestProviderKindNormalization" name="test_string_provider_kind_normalized" time="0.010" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_add_file_new" time="0.007" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_add_file_update_existing" time="0.005" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_remove_file" time="0.007" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_remove_nonexistent_file" time="0.005" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_file_changed_new_file" time="0.009" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_file_changed_modified_content" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_file_unchanged" time="0.008" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_get_chunk_ids_for_file" time="0.009" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_get_chunk_ids_for_nonexistent_file" time="0.009" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_get_all_file_paths" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestIndexFileManifest" name="test_get_stats" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestFileManifestManager" name="test_save_and_load" time="0.012" /><testcase classname="tests.unit.test_file_manifest.TestFileManifestManager" name="test_load_nonexistent" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestFileManifestManager" name="test_delete" time="0.008" /><testcase classname="tests.unit.test_file_manifest.TestFileManifestManager" name="test_create_new" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestIncrementalIndexing" name="test_skip_unchanged_files" time="0.011" /><testcase classname="tests.unit.test_file_manifest.TestIncrementalIndexing" name="test_detect_new_files" time="0.007" /><testcase classname="tests.unit.test_file_manifest.TestIncrementalIndexing" name="test_detect_modified_files" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestIncrementalIndexing" name="test_detect_deleted_files" time="0.006" /><testcase classname="tests.unit.test_file_manifest.TestIncrementalIndexing" name="test_update_manifest_after_indexing" time="0.008" /><testcase classname="tests.unit.test_indexer_config" name="test_excludes_are_respected" time="0.073" /><testcase classname="tests.unit.test_indexer_config" name="test_excludes_field_exists" time="0.056" /><testcase classname="tests.unit.test_indexer_config" name="test_empty_excludes" time="0.063" /><testcase classname="tests.unit.test_indexer_config" name="test_glob_pattern_excludes" time="0.069" /><testcase classname="tests.unit.test_indexer_remove_path.TestRemovePathWithDeletedFiles" name="test_remove_deleted_file_from_store" time="0.069" /><testcase classname="tests.unit.test_indexer_remove_path.TestRemovePathWithDeletedFiles" name="test_remove_existing_file_from_store" time="0.068" /><testcase classname="tests.unit.test_indexer_remove_path.TestRemovePathWithDeletedFiles" name="test_remove_nonexistent_file_returns_zero" time="0.058" /><testcase classname="tests.unit.test_indexer_remove_path.TestRemovePathWithDeletedFiles" name="test_remove_with_multiple_files_in_store" time="0.134" /><testcase classname="tests.unit.test_indexer_remove_path.TestRemovePathWithDeletedFiles" name="test_remove_handles_malformed_entries_gracefully" time="0.121" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestStalePointRemovalInIndexFile" name="test_deletes_old_chunks_for_modified_file" time="0.093" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestStalePointRemovalInIndexFile" name="test_no_deletion_for_new_file" time="0.097" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestStalePointRemovalInIndexFile" name="test_deletion_continues_on_error" time="0.122" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestStalePointRemovalInBatchIndexing" name="test_batch_deletes_old_chunks_for_modified_files" time="0.128" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestStalePointRemovalInBatchIndexing" name="test_batch_deletes_multiple_modified_files" time="0.126" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestOrphanDetectionInValidation" name="test_detects_orphaned_chunks" time="0.064" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestOrphanDetectionInValidation" name="test_detects_missing_chunks" time="0.054" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestOrphanDetectionInValidation" name="test_no_issues_when_store_matches_manifest" time="0.056" /><testcase classname="tests.unit.test_indexer_stale_point_removal.TestOrphanDetectionInValidation" name="test_handles_empty_manifest" time="0.055" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_simple_function_filters_extra_kwargs" time="0.006" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_function_with_kwargs_passes_all_args" time="0.005" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_function_with_optional_params" time="0.004" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_client_options_unpacking_with_kwargs" time="0.005" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_provider_settings_unpacking_with_kwargs" time="0.006" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_kwargs_key_is_merged" time="0.004" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_class_constructor" time="0.004" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_class_constructor_with_kwargs" time="0.005" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_no_extra_kwargs_without_kwargs_param" time="0.005" /><testcase classname="tests.unit.test_introspection.TestCleanArgs" name="test_provider_settings_filtered_without_kwargs_param" time="0.005" /><testcase classname="tests.unit.test_introspection.TestIntrospectionHelpers" name="test_keyword_args" time="0.007" /><testcase classname="tests.unit.test_introspection.TestIntrospectionHelpers" name="test_positional_args" time="0.004" /><testcase classname="tests.unit.test_introspection.TestIntrospectionHelpers" name="test_takes_kwargs_true" time="0.004" /><testcase classname="tests.unit.test_introspection.TestIntrospectionHelpers" name="test_takes_kwargs_false" time="0.004" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestEmbeddingMetadataTracking" name="test_add_file_with_dense_embedding_metadata" time="0.006" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestEmbeddingMetadataTracking" name="test_add_file_with_sparse_embedding_metadata" time="0.009" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestEmbeddingMetadataTracking" name="test_add_file_with_both_embedding_types" time="0.007" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestEmbeddingMetadataTracking" name="test_backward_compatibility_v1_0_0" time="0.008" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_needs_reindexing_new_file" time="0.006" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_needs_reindexing_content_changed" time="0.010" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_needs_reindexing_dense_model_changed" time="0.009" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_needs_reindexing_sparse_model_changed" time="0.007" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_unchanged_same_models" time="0.006" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestModelChangeDetection" name="test_file_unchanged_no_embeddings" time="0.006" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestGetEmbeddingModelInfo" name="test_get_embedding_model_info_with_metadata" time="0.007" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestGetEmbeddingModelInfo" name="test_get_embedding_model_info_nonexistent_file" time="0.008" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestGetEmbeddingModelInfo" name="test_get_embedding_model_info_legacy_file" time="0.006" /><testcase classname="tests.unit.test_manifest_embedding_metadata.TestManifestPersistence" name="test_save_and_load_with_embedding_metadata" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_none_path" time="0.005" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_empty_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_dot_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_absolute_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_path_traversal" time="0.005" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_empty_chunk_ids" time="0.008" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_add_file_valid_relative_path" time="0.007" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_remove_file_none_path" time="0.007" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_get_file_none_path" time="0.005" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_has_file_none_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_file_changed_none_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestValidation" name="test_get_chunk_ids_none_path" time="0.006" /><testcase classname="tests.unit.test_manifest_validation.TestManifestEdgeCases" name="test_duplicate_chunk_ids" time="0.005" /><testcase classname="tests.unit.test_manifest_validation.TestManifestEdgeCases" name="test_update_with_different_chunk_count" time="0.007" /><testcase classname="tests.unit.test_manifest_validation.TestManifestEdgeCases" name="test_nested_relative_paths" time="0.005" /><testcase classname="tests.unit.test_manifest_validation.TestManifestEdgeCases" name="test_path_with_special_chars" time="0.007" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestManifestVectorStoreValidation" name="test_get_all_chunk_ids" time="0.006" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestManifestVectorStoreValidation" name="test_get_all_chunk_ids_empty" time="0.005" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestManifestVectorStoreValidation" name="test_get_files_by_embedding_config_dense_only" time="0.008" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestManifestVectorStoreValidation" name="test_get_files_by_embedding_config_sparse_only" time="0.005" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestManifestVectorStoreValidation" name="test_get_files_by_embedding_config_both" time="0.005" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestSelectiveReindexing" name="test_get_files_needing_dense_embeddings" time="0.005" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestSelectiveReindexing" name="test_get_files_needing_sparse_embeddings" time="0.006" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestSelectiveReindexing" name="test_get_files_needing_embeddings_no_provider" time="0.006" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestSelectiveReindexing" name="test_get_files_needing_embeddings_all_complete" time="0.008" /><testcase classname="tests.unit.test_manifest_vector_store_validation.TestSelectiveReindexing" name="test_priority_dense_over_sparse" time="0.006" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_status_display_initialization" time="0.007" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_status_display_with_custom_console" time="0.006" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_info" time="0.004" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_success" time="0.005" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_error" time="0.004" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_warning" time="0.005" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_section" time="0.007" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_table" time="0.008" /><testcase classname="tests.unit.ui.test_unified_ux.TestStatusDisplay" name="test_print_progress" time="0.006" /><testcase classname="tests.unit.ui.test_unified_ux.TestCLIErrorHandler" name="test_cli_error_handler_initialization" time="0.006" /><testcase classname="tests.unit.ui.test_unified_ux.TestCLIErrorHandler" name="test_cli_error_handler_verbose_mode" time="0.007" /><testcase classname="tests.unit.ui.test_unified_ux.TestCLIErrorHandler" name="test_cli_error_handler_debug_mode" time="0.005" /><testcase classname="tests.unit.ui.test_unified_ux.TestCLIErrorHandler" name="test_handle_codeweaver_error" time="0.007" /><testcase classname="tests.unit.ui.test_unified_ux.TestCLIErrorHandler" name="test_handle_unexpected_error" time="0.040" /><testcase classname="tests.unit.ui.test_unified_ux.TestUnifiedUXIntegration" name="test_display_and_error_handler_work_together" time="0.007" /><testcase classname="tests.unit.ui.test_unified_ux.TestDoctorConsoleProxy" name="test_console_proxy_delegates_to_current_display" time="0.005" /><testcase classname="tests.unit.ui.test_unified_ux.TestDoctorConsoleProxy" name="test_console_proxy_has_required_methods" time="0.016" /></testsuite></testsuites>